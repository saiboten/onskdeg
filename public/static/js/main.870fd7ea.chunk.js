(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,a){},111:function(e,t,a){},114:function(e,t,a){},116:function(e,t,a){},118:function(e,t,a){},120:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(31),r=a.n(i),c=(a(62),a(64),a(122)),u=a(125),o=a(124),l=a(12),d=a(6),h=a(5),m=a(8),f=a(7),b=a(9),p=a(3);a(81);var v=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.children;return s.a.createElement("div",{className:"container"},e)}}]),t}(s.a.PureComponent),g=a(15),k=a(50),O=a.n(k),w=a(16),j=a(83);j.initializeApp({apiKey:"AIzaSyDRCFzLXgaM36t-0Vnhp2XbbQJrUjDmQAw",authDomain:"onskdeg.firebaseapp.com",databaseURL:"https://onskdeg.firebaseio.com",storageBucket:"onskdeg.appspot.com",messagingSenderId:"776764935060"});var E=j,S=a(56);a(89);function y(e){var t=e.name,a=e.type,n=Object(S.a)(e,["name","type"]);return s.a.createElement("button",Object.assign({type:a,className:"icon"},n),s.a.createElement("svg",{className:"icon__icon"},s.a.createElement("use",{xlinkHref:"/svg/sprite.svg#icon-".concat(t)})))}function x(){var e=Object(g.a)(["\n  display: flex;\n  margin: 1rem;\n"]);return x=function(){return e},e}function N(){var e=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n"]);return N=function(){return e},e}var _=E.storage().ref(),U=a(17)("Wish");a(93);var D=w.a.div(N()),W=w.a.div(x()),C=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this))).state={edit:!1,text:e.wish.name,confirm:!1,image:""},a.click=a.click.bind(Object(p.a)(Object(p.a)(a))),a.focusLost=a.focusLost.bind(Object(p.a)(Object(p.a)(a))),a.updateText=a.updateText.bind(Object(p.a)(Object(p.a)(a))),a.deleteItem=a.deleteItem.bind(Object(p.a)(Object(p.a)(a))),a.cancel=a.cancel.bind(Object(p.a)(Object(p.a)(a))),a.deleteConfirmed=a.deleteConfirmed.bind(Object(p.a)(Object(p.a)(a))),a.onDrop=a.onDrop.bind(Object(p.a)(Object(p.a)(a))),U("props: ",e),e.wish.image&&_.child(e.wish.image).getDownloadURL().then(function(e){U("url: ",e),a.setState({image:e})}),a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({text:e.wish.name,confirm:e.wish.confirm})}},{key:"componentDidUpdate",value:function(){this.input&&this.input.focus()}},{key:"onDrop",value:function(e,t){var a=this;U("Looks like I dropped something",e,t);var n=this.props,s=n.wish,i=n.addImage,r="".concat(s.id,".").concat(e[0].name.split(".")[1]);_.child(r).put(e[0]).on("state_changed",function(){},function(){U("Error. Wups.")},function(){U("Success!"),_.child(r).getDownloadURL().then(function(e){U("url: ",e),a.setState({image:e})}),i(s,r)})}},{key:"updateText",value:function(e){this.setState({text:e.target.value})}},{key:"deleteItem",value:function(){this.setState({confirm:!0})}},{key:"cancel",value:function(){this.setState({confirm:!1})}},{key:"deleteConfirmed",value:function(){var e=this.props;(0,e.delete)(e.wish.id)}},{key:"focusLost",value:function(){var e=this.props,t=e.update,a=e.wish,n=this.state.text;this.setState({edit:!1}),t({name:n,id:a.id,checkedby:a.checkedby,checked:a.checked,image:a.image})}},{key:"click",value:function(){this.setState({edit:!0})}},{key:"render",value:function(){var e=this,t=this.props.wish,a=this.state,n=a.confirm,i=a.image,r=a.edit,c=a.text,u=t.image?s.a.createElement("img",{className:"wish__image",alt:"Awesome",src:i}):"",o=n?s.a.createElement(D,null,s.a.createElement(y,{type:"button",name:"x",onClick:this.cancel}),s.a.createElement(y,{type:"button",name:"check",onClick:this.deleteConfirmed})):s.a.createElement(D,null,s.a.createElement(y,{type:"button",name:"trash-2",onClick:this.deleteItem}),s.a.createElement(O.a,{className:"wish__wish-dropzone",onDrop:this.onDrop},s.a.createElement(y,{type:"button",name:"upload"}))),l=r?s.a.createElement("textarea",{className:"wish__wish-text wish__wish-text--active",ref:function(t){e.input=t},onBlur:this.focusLost,onChange:this.updateText,value:c}):s.a.createElement("textarea",{onClick:this.click,className:"wish__wish-text",defaultValue:c});return s.a.createElement("div",{className:"wish__one-wish"},s.a.createElement(W,null,l,o),u)}}]),t}(s.a.Component),L=a(18),I=function(e){return Object(L.a)({type:"SET_USER_WISHES"},e)},T=a(17)("YourWishList");a(96);var R=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={newWish:"",feedback:""},a.addWish=a.addWish.bind(Object(p.a)(Object(p.a)(a))),a.updateWishState=a.updateWishState.bind(Object(p.a)(Object(p.a)(a))),a.update=a.update.bind(Object(p.a)(Object(p.a)(a))),a.deleteThis=a.deleteThis.bind(Object(p.a)(Object(p.a)(a))),a.addImage=a.addImage.bind(Object(p.a)(Object(p.a)(a))),a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){T("componentDidMount");var e=this.props,t=e.user,a=e.update;this.firebaseRef=E.database().ref("wishes/".concat(t.uid,"/wishes")),this.firebaseRef.on("value",function(e){a(e.val())})}},{key:"componentWillUnmount",value:function(){this.firebaseRef.off()}},{key:"createGuid",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}},{key:"updateWishState",value:function(e){this.setState({newWish:e.target.value})}},{key:"addWish",value:function(e){var t=this.props,a=t.user,n=t.wishes,s=this.state.newWish;if(e.preventDefault(),""!==s){T("Adding wish");var i=Object.assign([],n);i.unshift({name:s,checked:!1,id:this.createGuid()}),E.database().ref("wishes/".concat(a.uid)).set({wishes:i}),this.setState({newWish:"",feedback:""})}else this.setState({feedback:"\xd8nsket kan ikke v\xe6re tomt"})}},{key:"update",value:function(e){T("Saving wishlist: ",e);var t=this.props,a=t.user,n=t.wishes.map(function(t){return t.id===e.id?{name:e.name,checked:e.checked,checkedby:e.checkedby?e.checkedby:"",id:e.id,image:e.image?e.image:""}:t});E.database().ref("wishes/".concat(a.uid)).set({wishes:n})}},{key:"addImage",value:function(e,t){T("Adding image to wish: ",e,t);var a=this.props,n=a.user,s=a.wishes.map(function(a){return a.id===e.id?{name:e.name,checked:e.checked,checkedby:e.checkedby?e.checkedby:"",id:e.id,image:t}:a});E.database().ref("wishes/".concat(n.uid)).set({wishes:s})}},{key:"deleteThis",value:function(e){T("Delete id: ",e);var t=this.props,a=t.user,n=t.wishes,s=Object.assign([],n),i=s.filter(function(t){return T(t.id),t.id!==e});T("Wish list after deletion: ",s),E.database().ref("wishes/".concat(a.uid)).set({wishes:i})}},{key:"render",value:function(){var e=this;T("This.props. ",this.props);var t=this.props.wishes,a=this.state,n=a.newWish,i=a.feedback,r=t.map(function(t){return T("Creating wish based on this el: ",t),s.a.createElement(C,{key:t.id,update:e.update,delete:e.deleteThis,addImage:e.addImage,wishlist:r,wish:t})});return T("Wishes: ",r),s.a.createElement(v,null,s.a.createElement("div",{className:"flex-row space-between"},s.a.createElement("h1",null,"Din \xf8nskeliste")),s.a.createElement("form",{onSubmit:this.addWish},s.a.createElement("div",{className:"your-wishlist_add-wish-wrapper"},s.a.createElement("textarea",{placeholder:"Legg inn nye \xf8nsker her",className:"your-wishlist_add-wish-textarea",value:n,onChange:this.updateWishState}),s.a.createElement(y,{type:"submit",name:"check"}),s.a.createElement("div",null,i))),s.a.createElement("div",{className:"your-wishlist__wishlist"},r))}}]),t}(s.a.Component),A=Object(l.connect)(function(e){var t=e.wish,a=e.user;return T("User wishes",t[a.uid]),{wishes:t[a.uid]?t[a.uid]:[],user:a}},function(e){return{update:function(t){e({type:"SET_OWN_WISHES",wishes:t})}}})(R),P=a(121);a(98);var F=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.el,a=e.deleteMe;return s.a.createElement("div",{className:"added-user-link__wrapper flex-row space-between"},s.a.createElement(P.a,{className:"added-user-link__link button smallspace",to:"/other/".concat(t.uid)},t.name),s.a.createElement("button",{type:"button",className:"added-user-link__delete smallspace button",onClick:function(){return a(t.email)}},"Slett"))}}]),t}(s.a.PureComponent),B=a(24),M=a(53),G={loaded:!1},H=a(17)("userReducer"),K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(H("Input: state: ",e,". Action: ",t),t.type){case"USER_LOADED":if(t.user){var a=t.user,n=a.uid,s=a.email;return Object(L.a)({},e,{uid:n,email:s,loaded:!0})}return Object(L.a)({},e,{loaded:!0});case"LOG_OUT":return G;default:return Object(L.a)({},e)}},z={},V=a(17)("suggestion"),X=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ADD_SUGGESTION":(e=Object.assign({},t))[a.suggestedTo]||(e[a.suggestedTo]=[]),e[a.suggestedTo].push({id:a.id,wishSuggestion:a.wishSuggestion,suggestedBy:a.suggestedBy,checked:!1,checkedBy:""}),V("Old state: ",t,". New state: ",e);break;case"CHECK_SUGGESTION":V("Checking suggestion, action: ",a),(e=Object.assign({},t))[a.suggestedTo]=e[a.suggestedTo].map(function(e){var t=Object.assign({},e);return e.id===a.id&&(V("Found the right id: ",e.id),t.checked=!e.checked,t.checkedBy=a.checkedBy),V("New suggestion values: ",t),t}),V("Old state: ",t,". New state: ",e);break;case"SET_SUGGESTIONS":e=Object.assign({},a.suggestions);break;case"DELETE_SUGGESTION":return(e=Object.assign({},t))[a.userid]=e[a.userid].filter(function(e){return e.id!==a.idToBeDeleted}),V("Old state: ",t,"New state: ",e),e;default:e=t}return e},J=a(32),Q={},q=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_ALL_WISHES":e=Object.assign({},a.wishes);break;case"SET_USER_WISHES":var n=a.uid,s=a.wishes;return Object(L.a)({},t,Object(J.a)({},n,s));default:e=t}return e},Y={loaded:!1,loading:!1,friends:[]},$=Object(B.combineReducers)({user:K,suggestion:X,wish:q,friends:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_FRIENDS":return Object(L.a)({},e,{loading:!0});case"FRIENDS_LOADED":return Object(L.a)({},e,{friends:t&&t.data&&t.data.filter(function(e){return e}),loading:!1,loaded:!0});default:return Object(L.a)({},e)}}}),Z=a(26),ee=a.n(Z),te=a(19),ae=function(e){return e.user},ne=ee.a.mark(ce),se=ee.a.mark(ue),ie=ee.a.mark(oe);function re(e){return new Promise(function(t){E.database().ref("users/".concat(e.uid,"/users")).on("value",function(e){var a=e.val();t(a)})})}function ce(){var e,t;return ee.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(te.c)(ae);case 2:return e=a.sent,a.next=5,Object(te.a)(re,e);case 5:return t=a.sent,a.next=8,Object(te.b)({type:"FRIENDS_LOADED",data:t});case 8:case"end":return a.stop()}},ne,this)}function ue(e){var t,a,n;return ee.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.wishes,s.next=3,Object(te.c)(ae);case 3:return a=s.sent,n=a.uid,s.next=7,Object(te.b)(I({uid:n,wishes:t}));case 7:case"end":return s.stop()}},se,this)}function oe(){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.d)("LOAD_FRIENDS",ce);case 2:return e.next=4,Object(te.d)("SET_OWN_WISHES",ue);case 4:case"end":return e.stop()}},ie,this)}var le=oe,de=Object(M.a)(),he=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||B.compose,me=Object(B.createStore)($,he(Object(B.applyMiddleware)(de)));de.run(le);var fe=me,be=a(41),pe=function(){return s.a.createElement("div",null,"Laster")};function ve(){var e=Object(g.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-left: 2rem;\n  border-bottom: 1px solid black;\n"]);return ve=function(){return e},e}var ge=a(17)("OthersWishListSelection");a(102);var ke=w.a.div(ve()),Oe=function(e){function t(e){var a;Object(d.a)(this,t),a=Object(m.a)(this,Object(f.a)(t).call(this,e));var n=e.friends||[];return a.state={users:n,newUser:"",feedback:""},a.updateUserState=a.updateUserState.bind(Object(p.a)(Object(p.a)(a))),a.addUserClickEvent=a.addUserClickEvent.bind(Object(p.a)(Object(p.a)(a))),a.deleteUser=a.deleteUser.bind(Object(p.a)(Object(p.a)(a))),a.addUser=a.addUser.bind(Object(p.a)(Object(p.a)(a))),a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"updateUserState",value:function(e){ge("updateUserState"),this.setState({newUser:e.target.value})}},{key:"addUserLinkClick",value:function(e){ge("addUserLinkClick",e);var t=fe.getState().users.filter(function(t){return t.uid===e})[0];this.addUser(t.email)}},{key:"addUserClickEvent",value:function(e){ge("addUserClickEvent",e);var t=this.state.newUser;e.preventDefault(),this.addUser(t)}},{key:"addUser",value:function(e){ge("addUserClickEvent",e);var t=this.props,a=t.users,n=t.user,s=this.state.users,i=a.filter(function(t){return t.email===e})[0];if(ge("User from db : ",i),i)if(1===s.filter(function(t){return t.email===e}).length)this.setState({feedback:"Brukeren er lagt til fra f\xf8r"});else if(e===n.email)this.setState({feedback:"Du har ikke lov \xe5 legge til deg selv"});else{var r=s.concat([i]);ge("New list: ",r),E.database().ref("users/".concat(n.uid)).set({users:r}),this.setState({newUser:""})}else this.setState({feedback:"Denne brukeren finnes ikke"})}},{key:"deleteUser",value:function(e){ge("deleteUser",e);var t=this.props.user,a=this.state.users.slice().filter(function(t){return t.email!==e});E.database().ref("users/".concat(t.uid)).set({users:a}),0===a.length&&this.setState({users:[]})}},{key:"render",value:function(){var e=this,t=this.state,a=t.users,n=t.newUser,i=t.feedback,r=a.map(function(t){return s.a.createElement(F,{key:t.uid,deleteMe:e.deleteUser,el:t})});return s.a.createElement(v,null,s.a.createElement(ke,null,s.a.createElement("h1",null,"Se \xf8nskeliste til")),s.a.createElement("div",{className:"wishlist-selection__added-users-container"},r),s.a.createElement("form",{onSubmit:this.addUserClickEvent},s.a.createElement("p",null,"Legg til (legg inn epost)"),s.a.createElement("input",{value:n,onChange:this.updateUserState}),s.a.createElement("input",{className:"button button--padded",type:"submit",value:"OK"})),s.a.createElement("p",null,i))}}]),t}(s.a.Component);Oe.defaultProps={user:{},users:[],friends:null};var we,je=(we=function(e){var t=e.loaded,a=e.loading,n=e.load;return t||a||n(),!t},Object(be.a)(we,Object(be.b)(pe)))(Oe),Ee=Object(l.connect)(function(e){var t=e.user,a=e.friends;return{user:t,friends:a.friends,loaded:a.loaded,loading:a.loading,users:e.users}},function(e){return{load:function(){return e({type:"LOAD_FRIENDS"})}}})(je),Se=a(52),ye=a.n(Se),xe=(a(111),E.storage().ref()),Ne=a(17)("OtherWish"),_e=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this))).state={image:""},e.wishInfo.image&&xe.child(e.wishInfo.image).getDownloadURL().then(function(e){Ne("url: ",e),a.setState({image:e})}),a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.wishInfo,a=e.canDelete,n=e.deleteSuggestion,i=e.onClick,r=this.state.image,c=t.image?s.a.createElement("img",{className:"other-wish__image",alt:"Awesome",src:r}):"",u=t.checked?s.a.createElement("del",null,t.name):t.name,o=s.a.createElement(ye.a,{className:"other-wish__linkify"},u),l=t.checked?s.a.createElement("div",{className:"smallspace"},"Tatt"):"",d=a?s.a.createElement("button",{type:"button",className:"button other-wish__button_delete-suggestion",onClick:n},"Slett"):"";return s.a.createElement("div",{className:"flex-column border"},s.a.createElement("div",{className:"flex-row other-wish__upper-half"},s.a.createElement("div",{className:"flex-column smallspace other-wish__wish-text"},o,c),s.a.createElement("div",{className:"other-wish__buy-or-sell-wrapper"},s.a.createElement(y,{type:"button",name:(t.checked,"shopping-cart"),onClick:function(){return i(t.id)}}),d)),s.a.createElement("div",{className:"flex-column"},l))}}]),t}(s.a.Component);function Ue(){var e=Object(g.a)(["\n  display: flex;\n  justify-content: flex-end;\n"]);return Ue=function(){return e},e}var De=w.a.div(Ue()),We=a(17)("OthersWishList"),Ce=function(e){function t(e){var a;return Object(d.a)(this,t),a=Object(m.a)(this,Object(f.a)(t).call(this,e)),We("constructor"),a.state={hideSelected:!0,userState:"",feedback:""},a.check=a.check.bind(Object(p.a)(Object(p.a)(a))),a.toggleShowSelected=a.toggleShowSelected.bind(Object(p.a)(Object(p.a)(a))),a.shouldDisplayWish=a.shouldDisplayWish.bind(Object(p.a)(Object(p.a)(a))),a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){We("componentDidMount");var e=this.props,t=e.match.params.name,a=e.update;this.firebaseRef=E.database().ref("wishes/".concat(t,"/wishes")),this.firebaseRef.on("value",function(e){a(t,e.val())})}},{key:"componentWillUnmount",value:function(){this.firebaseRef.off()}},{key:"check",value:function(e){We("check",e);var t=this.props,a=t.user,n=t.match.params.name,s=this.props,i=s.wishes;(0,s.update)(n,i.map(function(t){return e===t.id?{name:t.name,checked:!t.checked,id:t.id,checkedby:a.email,checkedTime:new Date}:t})),this.setState({feedback:"Du kj\xf8pte eller solgte noe!"})}},{key:"toggleShowSelected",value:function(e){We("toggleShowSelected",e);var t=this.state.hideSelected;e.preventDefault(),this.setState({hideSelected:!t})}},{key:"shouldDisplayWish",value:function(e){var t=this.state.hideSelected;return We("Wish to be filtered: ",e),!e.checked||!t}},{key:"render",value:function(){var e=this,t=this.state,a=t.hideSelected,n=t.userState,i=t.feedback,r=this.props.wishes.filter(this.shouldDisplayWish).map(function(t){return s.a.createElement(_e,{key:t.id,onClick:e.check,wishInfo:t})});return s.a.createElement(v,null,s.a.createElement("div",{className:"flex-row space-between"},s.a.createElement("h1",{className:"shrink overflow-hidden"},"\xd8nskelisten til ",n)),s.a.createElement(De,null,s.a.createElement(y,{type:"button",name:a?"eye":"eye-off",onClick:this.toggleShowSelected})),s.a.createElement("p",null,i),r)}}]),t}(s.a.Component),Le=Object(l.connect)(function(e,t){var a=e.wish,n=e.user,s=t.match.params.name;return{wishes:a[s]||[],name:s,user:n}},function(e){return{update:function(t,a){e(I({uid:t,wishes:a}))}}})(Ce),Ie=a(54),Te=a(123),Re=function(e){return{type:"USER_LOADED",user:e}};function Ae(){var e=Object(g.a)(["\n\n"]);return Ae=function(){return e},e}function Pe(){var e=Object(g.a)(["\n\n"]);return Pe=function(){return e},e}function Fe(){var e=Object(g.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return Fe=function(){return e},e}var Be=w.a.div(Fe()),Me=w.a.div(Pe()),Ge=w.a.div(Ae());var He=function(e){var t=e.uid,a=e.logout,i=Object(n.useState)(""),r=Object(Ie.a)(i,2),c=r[0],u=r[1];return t?s.a.createElement(v,null,s.a.createElement("h1",null,"Hvilken \xf8nskeliste vil du se?"),s.a.createElement(Be,null,s.a.createElement(Me,null,s.a.createElement(P.a,{className:"smallspace button button--padded",to:"/yours"},"Din"),s.a.createElement(P.a,{className:"smallspace button button--padded",to:"/others"},"Andres")),s.a.createElement(Ge,null,s.a.createElement("button",{type:"button",className:"select-user__logout button-navigation button--square",onClick:function(){return function(e,t){E.auth().signOut().then(function(){e("Du er n\xe5 logget ut"),t()},function(t){console.log(t),e("Noe gikk galt under utlogging.")})}(u,a)}},"Logg ut"),c))):s.a.createElement(Te.a,{to:"/"})};He.defaultProps={uid:void 0};var Ke=Object(l.connect)(function(e){return{uid:e.user.uid}},function(e){return{logout:function(){e({type:"LOG_OUT"})}}})(He),ze=Object(l.connect)(function(e){return{users:e.users,user:e.user}})(Ke),Ve=new E.auth.FacebookAuthProvider;function Xe(){var e=Object(g.a)(["\n  margin: 2rem;\n  height: 4rem;\n"]);return Xe=function(){return e},e}function Je(){var e=Object(g.a)(["\n  font-size: 3rem;\n  margin: 2rem;\n"]);return Je=function(){return e},e}var Qe=a(17)("SelectUser");a(114);var qe=w.a.p(Je()),Ye=w.a.input(Xe()),$e=function(e){function t(e){var a;return Object(d.a)(this,t),a=Object(m.a)(this,Object(f.a)(t).call(this,e)),Qe("constructor"),a.state={user:"",password:"",feedback:""},a.updateUserState=a.updateUserState.bind(Object(p.a)(Object(p.a)(a))),a.updatePasswordState=a.updatePasswordState.bind(Object(p.a)(Object(p.a)(a))),a.logIn=a.logIn.bind(Object(p.a)(Object(p.a)(a))),a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;Qe("componentDidMount"),E.auth().getRedirectResult().then(function(){Qe("Login was apparently successful")}).catch(function(t){Qe("Facebook login failed: ",t),t&&e.setState({feedback:"Klarte ikke \xe5 logge deg inn med facebook, beklager det."})})}},{key:"loginFacebook",value:function(e){Qe("loginFacebook",e),e.preventDefault(),e.stopPropagation(),E.auth().signInWithRedirect(Ve)}},{key:"updateUserState",value:function(e){Qe("updateUserState",e),this.setState({user:e.target.value})}},{key:"updatePasswordState",value:function(e){Qe("updatePasswordState",e),this.setState({password:e.target.value})}},{key:"logIn",value:function(e){var t=this;Qe("logIn",e);var a=this.state,n=a.user,s=a.password;Qe("Logging user in with the following credentials: ",n,s),e.preventDefault(),this.setState({feedback:""}),E.auth().signInWithEmailAndPassword(n,s).catch(function(e){var a=e.code,n=e.message;Qe("Errorcode: ",a,"errorMessage",n),a&&t.setState({feedback:"Klarte ikke \xe5 logge deg inn, beklager det."})})}},{key:"render",value:function(){var e=this.props.user,t=this.state,a=t.user,n=t.password,i=t.feedback,r=e.uid&&s.a.createElement(qe,null,"Du er logget inn som: ",s.a.createElement("strong",null,e.email)),c=e.uid?"":s.a.createElement("form",{className:"select-user__form",onSubmit:this.logIn},s.a.createElement("label",{htmlFor:"username",className:"smallspace"},"Brukernavn"),s.a.createElement(Ye,{id:"username",value:a,onChange:this.updateUserState}),s.a.createElement("label",{htmlFor:"password",className:"smallspace"},"Passord"),s.a.createElement(Ye,{id:"password",type:"password",value:n,onChange:this.updatePasswordState}),s.a.createElement("div",{className:"flex-row space-between"},s.a.createElement("input",{className:"button button--padded",type:"submit",value:"Logg inn"}),s.a.createElement("button",{type:"button",className:"button button--padded select-user__facebook-button",onClick:this.loginFacebook},"Logg inn",s.a.createElement("br",null),"Med facebook")));return s.a.createElement(v,null,s.a.createElement("h1",null,"Logg inn"),r,c,s.a.createElement(qe,null,i))}}]),t}(s.a.Component),Ze=Object(l.connect)(function(e){return{user:e.user}},null)($e),et=a(17)("NameSelect");a(116);var tt=function(e){function t(){var e;return Object(d.a)(this,t),e=Object(m.a)(this,Object(f.a)(t).call(this)),et("constructor"),e.state={name:"",confirmedName:""},e.nameSelected=e.nameSelected.bind(Object(p.a)(Object(p.a)(e))),e.updateNameState=e.updateNameState.bind(Object(p.a)(Object(p.a)(e))),e}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){et("componentDidMount");var e=this.props,t=e.user,a=e.router;void 0===t.uid&&a.push("/")}},{key:"nameSelected",value:function(e){et("nameSelected",e);var t=this.props.user,a=this.state.name;e.preventDefault(),et("Name selected: ",a),this.setState({confirmedName:a});var n=fe.getState().allUserReducer.map(function(e){var n=Object.assign({},e);return e.email===t.email&&(n.name=a,et("Found the user. New user values: ",a,e)),n});et("New userlist after name selection : ",n),E.database().ref("/userlist").set(n)}},{key:"updateNameState",value:function(e){et("updateNameState",e),this.setState({name:e.target.value})}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.confirmedName,n=""===a?"":s.a.createElement(P.a,{className:"button",to:"/yours"},"Fortsett"),i=""===a?s.a.createElement("div",{className:"flex-row space-between"},s.a.createElement("input",{className:"space shrink smallspace",value:t,onChange:this.updateNameState,placeholder:"Skriv navn her"}),s.a.createElement("input",{className:"button grow smallspace",type:"submit",value:"OK"})):s.a.createElement("div",null,"Ditt brukernavn er:"," ",a);return s.a.createElement(v,null,s.a.createElement("h1",null,"Velg brukernavn"),s.a.createElement("div",{className:"flex-column"},s.a.createElement("form",{onSubmit:this.nameSelected},i)),n)}}]),t}(s.a.Component),at=Object(l.connect)(function(e){return{user:e.user}},void 0)(tt),nt=a(17)("Gift"),st=function(e){function t(e){var a;return Object(d.a)(this,t),a=Object(m.a)(this,Object(f.a)(t).call(this)),nt("info: ",e.info),a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.info.name;return s.a.createElement("li",{className:"smallspace"},e)}}]),t}(s.a.PureComponent),it=a(17)("GiftedUser"),rt=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this))).setState={gifts:[]},it("wishes",e.wishes),a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e,t=this.props,a=t.user,n=t.wishes;return n?0===(e=n.filter(function(e){return a.email===e.checkedby&&e.checked}).map(function(e){return s.a.createElement(st,{info:e})})).length&&(e=s.a.createElement("div",null,"Ingen gaver :(")):e=s.a.createElement("div",null,a.name," ","har ingen \xf8nsker!"),s.a.createElement("div",null,s.a.createElement("h2",null,a.name),s.a.createElement("ul",null,e))}}]),t}(s.a.Component),ct=a(17)("Gifts"),ut=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(m.a)(this,Object(f.a)(t).call(this))).state={giftedUsers:[]},e.storeSubscription=void 0,e.updateWishes=e.updateWishes.bind(Object(p.a)(Object(p.a)(e))),e.updateWishBasedOnUserList=e.updateWishBasedOnUserList.bind(Object(p.a)(Object(p.a)(e))),e}return Object(b.a)(t,e),Object(h.a)(t,null,[{key:"mapSuggestionToWish",value:function(e){var t=fe.getState().suggestion[e];return t?t.map(function(e){return{checked:e.checked,checkedby:e.checkedBy,name:e.wishSuggestion}}):[]}}]),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.storeSubscription=fe.subscribe(this.updateWishes),this.updateWishes()}},{key:"componentWillUnmount",value:function(){ct("Unsubscribing"),this.storeSubscription()}},{key:"updateWishes",value:function(){var e=this;ct("All users: ",fe.getState().allUserReducer);var t=this.props.user;E.database().ref("users/".concat(t.uid)).once("value",function(t){if(null!=t.val()){var a=t.val().users;ct("data :",a),e.updateWishBasedOnUserList(a)}})}},{key:"updateWishBasedOnUserList",value:function(e){var a=e.map(function(e){ct("Gifted user: ",e);var a,n=t.mapSuggestionToWish(e.uid);return fe.getState().wishReducer[e.uid]&&(a=fe.getState().wishReducer[e.uid].wishes),a||(a=[]),ct("suggestions: ",n,". Wishes: ",a),s.a.createElement(rt,{user:e,wishes:a.concat(n)})});this.setState({giftedUsers:a})}},{key:"userFromUid",value:function(e){var t=this.props.users;return ct("All users: ",t),t.reduce(function(t,a){return e===a.uid?a.name:t},"")}},{key:"render",value:function(){ct("Wishes: ",fe.getState().wishReducer);var e=this.state.giftedUsers;return s.a.createElement(v,null,s.a.createElement("div",{className:"flex-row space-between"},s.a.createElement("h1",null,"Dine gaver"),s.a.createElement(P.a,{className:"shrink button-navigation smallspace",to:"/yours"},"Tilbake")),s.a.createElement("hr",null),s.a.createElement("ul",null,e))}}]),t}(s.a.Component);ut.defaultProps={user:{},users:[]};var ot=ut,lt=a(17)("authFirebase"),dt={authChangeListener:function(){E.auth().onAuthStateChanged(function(e,t){lt("onAuthStateChanged. User logged in: ",e,t),e?(fe.dispatch(Re(e)),E.database().ref("/userlist").once("value").then(function(t){var a=t.val(),n=0===a.filter(function(t){return t.email===e.email}).length;void 0===a?((a=[]).push({email:e.email,uid:e.uid}),lt("Users to be stored after new user added",a),E.database().ref("/userlist").set(a)):n&&(a.push({email:e.email,uid:e.uid}),lt("Adding user ",e,"Users: ",a),E.database().ref("/userlist").set(a))})):fe.dispatch(Re())})}};a(118);var ht=function(e){return e.loaded?s.a.createElement(c.a,null,s.a.createElement(s.a.Fragment,null,s.a.createElement(ze,null),s.a.createElement(u.a,null,s.a.createElement(o.a,{path:"/",exact:!0,component:Ze}),s.a.createElement(o.a,{path:"/nameselect",component:at}),s.a.createElement(o.a,{path:"/yours",component:A}),s.a.createElement(o.a,{path:"/others",component:Ee}),s.a.createElement(o.a,{path:"/gifts",component:ot}),s.a.createElement(o.a,{path:"/other/:name",component:Le})))):s.a.createElement("div",null,"Laster")};ht.defaultProps={loaded:!1};var mt=Object(l.connect)(function(e){return{loaded:e.user.loaded}},null)(ht);dt.authChangeListener();var ft=function(){return s.a.createElement(l.Provider,{store:fe},s.a.createElement(mt,null))},bt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function pt(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(s.a.createElement(ft,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");bt?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):pt(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):pt(e)})}}()},57:function(e,t,a){e.exports=a(120)},62:function(e,t,a){},64:function(e,t,a){},81:function(e,t,a){},89:function(e,t,a){},93:function(e,t,a){},96:function(e,t,a){},98:function(e,t,a){}},[[57,2,1]]]);
//# sourceMappingURL=main.870fd7ea.chunk.js.map