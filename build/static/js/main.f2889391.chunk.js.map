{"version":3,"sources":["components/common/container/Container.tsx","components/firebase/firebase.ts","components/common/Icon.tsx","components/wish/Wish.tsx","state/actions/wish.ts","components/yours/YourWishList.tsx","components/otherwishlistselection/addeduserlink/AddedUserLink.tsx","components/common/Loading.tsx","components/common/spinnerWhileLoading.tsx","components/otherwishlistselection/OthersWishListSelectionWrapper.tsx","state/actions/friends.ts","components/others/OtherWish.tsx","components/others/OthersWishList.tsx","state/actions/user.ts","styles/colors.ts","components/common/Link.ts","components/header/Header.tsx","constants.ts","components/firebase/facebooklogin.ts","components/login/facebook-icon.svg","components/common/Spinner.tsx","components/common/Button.ts","components/login/ThirdPartyLogin.tsx","components/login/InternalLogin.tsx","components/login/Login.tsx","components/setname/SetName.tsx","state/reducers/user.ts","state/reducers/wish.ts","state/reducers/friends.ts","state/reducers/index.ts","state/selectors/selectors.ts","state/sagas/usersaga.ts","state/sagas/wishsaga.ts","state/sagas/index.ts","store.ts","components/firebase/authFirebase.ts","App.tsx","index.tsx"],"names":["StyledContainer","styled","div","_templateObject","firebase","initializeApp","apiKey","authDomain","databaseURL","storageBucket","messagingSenderId","Icon","_ref","name","type","onClick","rest","Object","objectWithoutProperties","react_default","a","createElement","assign","className","xlinkHref","concat","storageRef","storage","ref","debug","require","StyledActionButtons","Wish_templateObject","StyledWishAndActions","_templateObject2","Wish","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","edit","text","wish","confirm","image","click","bind","assertThisInitialized","focusLost","updateText","deleteItem","cancel","deleteConfirmed","onDrop","child","getDownloadURL","then","url","setState","nextProps","input","focus","acceptedFiles","rejectedFiles","_this2","_this$props","addImage","imageName","id","split","put","on","e","target","value","_this$props2","deleteProp","delete","_this$props3","update","checkedby","checked","_this3","_this$state","imageState","alt","src","deleteWish","Icon_Icon","dist_default","html","c","onBlur","onChange","defaultValue","React","Component","storeWishesToFirebase","uid","wishes","setWishesForUser","data","objectSpread","YourWishList","newWish","feedback","addWish","updateWishState","deleteThis","user","updateWishStore","firebaseRef","database","snapshot","val","off","replace","r","Math","random","toString","preventDefault","newWishList","unshift","createGuid","map","_this$props4","deleteId","_this$props5","filteredNewWishList","filter","wishesNew","el","wish_Wish","key","Container","onSubmit","placeholder","connect","dispatch","newData","AddedUserLink","deleteMe","Link","to","email","animation","keyframes","Loading_templateObject","Spinner","Loading_templateObject2","Loading","spinnerWhileLoading","isLoading","branch","renderComponent","StyledHeader","OthersWishListSelectionWrapper_templateObject","OthersWishListSelection","friends","newUser","updateUserState","addUserClickEvent","deleteUser","addUser","updateFriendStore","newUserMail","addFriend","deleteFriend","userNotFound","newFriend","usersLinks","addeduserlink_AddedUserLink","WithSpinner","loaded","loading","load","_ref2","_ref2$friends","deleteFriendAction","newFriendList","setFriends","newFriendMail","addFriendAction","OtherWish","wishInfo","canDelete","deleteSuggestion","imageTag","item","linkifyed","Linkify_default","checkedByElem","_onClick","apply","arguments","ActionButtonsContainer","OthersWishList_templateObject","OthersWishList","hideSelected","check","toggleShowSelected","shouldDisplayWish","match","params","setWishes","storeWishes","console","log","checkedTime","Date","friend","filteredWishes","others_OtherWish","_ref3","OthersWishListWrapper","_ref$friends","friendsFiltered","u","length","reduce","userLoaded","gold","goldDark","Color","fade","string","colors","RouterLink","Link_templateObject","NavLink","RouterNavLink","Link_templateObject2","darken","Header_templateObject","othersActive","location","pathname","startsWith","logout","_useState","useState","_useState2","slicedToArray","setFeedback","H1","h1","Header_templateObject2","UserEmail","span","_templateObject3","UserInfo","_templateObject4","ActionButtons","_templateObject5","CustomNavLink","_templateObject6","Fragment","auth","signOut","logOut","Header_StyledHeader","activeClassName","exact","isActive","provider","FacebookAuthProvider","_extends","i","source","prototype","hasOwnProperty","facebook_icon_ref","fill","d","__webpack_require__","p","spinnerKeyframe","Spinner_templateObject","Spinner_templateObject2","BorderStyles","BorderButton","button","Button_templateObject","BorderInput","Button_templateObject2","FacebookIcon","version","xmlnsXlink","x","y","width","height","viewBox","enableBackground","xmlSpace","ThirdPartyLogin_templateObject","ButtonSpinner","ThirdPartyLogin_templateObject2","ThirdPartyLogin","submitting","loginFacebook","stopPropagation","signInWithRedirect","facebook","SmButton","ThirdPartyLogin_templateObject3","Link_Link","StyledInput","InternalLogin_templateObject","SubmitButton","InternalLogin_templateObject2","InternalLogin","password","errorMessage","updatePasswordState","logIn","signInWithEmailAndPassword","catch","error","errorCode","code","message","htmlFor","StyledParagraph","Login_templateObject","StyledCircleContainer","Login_templateObject2","getRandomInt","min","max","num","floor","StyledCircle","Login_templateObject3","size","top","left","LoginContainer","Login_templateObject4","Login","getRedirectResult","Login_templateObject5","circles","Array","index","BrowserRouter","Switch","Route","path","component","SetNameContainer","SetName_templateObject","setTheName","setNameAction","setName","_useState3","_useState4","setEmail","submit","disabled","initialState","undefined","userReducer","action","_action$user","defineProperty","reducer","onskdegReducers","combineReducers","loadUserList","setNameAndEmail","userSaga","getUserList","currentUser","Promise","resolve","once","resolveVal","regenerator_default","wrap","_context","prev","next","select","userSelect","sent","stop","_marked","getFriendByEmail","mail","reject","usersObj","filteredList","keys","newUserList","_context2","friendsSelect","toConsumableArray","set","_marked2","_context3","_marked3","_context4","_marked4","_context5","takeEvery","_marked5","setOwnWishes","storeWishesToFirebaseSaga","wishSaga","wishsaga_marked","wishsaga_marked2","wishsaga_marked3","rootSaga","all","sagas_marked","sagaMiddleware","createSagaMiddleware","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","run","obj","authChangeListener","onAuthStateChanged","HeaderWithRouter","withRouter","Header","AppCompWrapper","SetName","login_Login","authFirebase","App","es","navigator","addEventListener","serviceWorker","register","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.f2889391.chunk.js","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\n\nconst StyledContainer = styled.div`\n  margin: 10px auto;\n  border: 1px solid black;\n  padding: 10px;\n  border-radius: 5px;\n  background-color: white;\n  max-width: 900px;\n`;\n\nexport default StyledContainer;\n","import firebase from 'firebase';\n\nconst config = {\n  apiKey: 'AIzaSyDRCFzLXgaM36t-0Vnhp2XbbQJrUjDmQAw',\n  authDomain: 'onskdeg.firebaseapp.com',\n  databaseURL: 'https://onskdeg.firebaseio.com',\n  storageBucket: 'onskdeg.appspot.com',\n  messagingSenderId: '776764935060',\n};\nfirebase.initializeApp(config);\nexport default firebase;\n","import React from 'react';\n\nimport './Icon.scss';\n\n/* eslint-disable react/button-has-type */\nexport default function Icon({ name, type, onClick, ...rest }: { name: string, type: string, onClick: any}) {\n  return (\n    <button type={type} className=\"icon\" onClick={onClick} {...rest}>\n      <svg className=\"icon__icon\">\n        <use xlinkHref={`/svg/sprite.svg#icon-${name}`} />\n      </svg>\n    </button>\n  );\n}\n/* eslint-enable react/button-has-type */\n","import React from 'react';\nimport { func, any } from 'prop-types';\nimport Dropzone from 'react-dropzone';\nimport styled from 'styled-components';\n\nimport firebase from '../firebase/firebase';\nimport Icon from '../common/Icon';\nimport { Wish as WishType } from '../../types/types';\n\nconst storageRef = firebase.storage().ref();\n\nconst debug = require('debug')('Wish');\n\nrequire('./wish.scss');\n\nconst StyledActionButtons = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n`;\n\nconst StyledWishAndActions = styled.div`\n  display: flex;\n  margin: 1rem;\n`;\n\ninterface P {\n  wish: WishType\n  addImage: (wish: WishType, imageName: string) => void;\n  delete: (wishId: string) => void;\n  update: (wish: WishType) => void;\n}\n\ninterface S {\n  edit: boolean,\n  text: string,\n  confirm: boolean,\n  image: string\n}\n\nclass Wish extends React.Component<P,S> {\n\n  input: any;\n\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      edit: false,\n      text: props.wish.name,\n      confirm: false,\n      image: '',\n    };\n    this.click = this.click.bind(this);\n    this.focusLost = this.focusLost.bind(this);\n    this.updateText = this.updateText.bind(this);\n    this.deleteItem = this.deleteItem.bind(this);\n    this.cancel = this.cancel.bind(this);\n    this.deleteConfirmed = this.deleteConfirmed.bind(this);\n    this.onDrop = this.onDrop.bind(this);\n    debug('props: ', props);\n\n    if (props.wish.image) {\n      storageRef.child(props.wish.image).getDownloadURL().then((url) => {\n        debug('url: ', url);\n        this.setState({\n          image: url,\n        });\n      });\n    }\n  }\n\n  componentWillReceiveProps(nextProps: any) {\n    this.setState({\n      text: nextProps.wish.name,\n      confirm: nextProps.wish.confirm,\n    });\n  }\n\n  componentDidUpdate() {\n    if (this.input) {\n      this.input.focus();\n    }\n  }\n\n  onDrop(acceptedFiles: any, rejectedFiles: any) {\n    debug('Looks like I dropped something', acceptedFiles, rejectedFiles);\n    const { wish, addImage } = this.props;\n\n    const imageName = `${wish.id}.${acceptedFiles[0].name.split('.')[1]}`;\n\n    const uploadTask = storageRef.child(imageName)\n      .put(acceptedFiles[0]);\n\n    uploadTask.on('state_changed', () => {\n    }, () => {\n      debug('Error. Wups.');\n    }, () => {\n      debug('Success!');\n      storageRef.child(imageName).getDownloadURL().then((url) => {\n        debug('url: ', url);\n        this.setState({\n          image: url,\n        });\n      });\n      addImage(wish, imageName);\n    });\n  }\n\n  updateText(e: React.ChangeEvent<HTMLTextAreaElement>) {\n    this.setState({\n      text: e.target.value,\n    });\n  }\n\n  deleteItem() {\n    this.setState({\n      confirm: true,\n    });\n  }\n\n  cancel() {\n    this.setState({\n      confirm: false,\n    });\n  }\n\n  deleteConfirmed() {\n    const { delete: deleteProp, wish } = this.props;\n    deleteProp(wish.id);\n  }\n\n  focusLost() {\n    const { update, wish } = this.props;\n    const { text } = this.state;\n\n    this.setState({\n      edit: false,\n    });\n    update({\n      name: text,\n      id: wish.id,\n      checkedby: wish.checkedby,\n      checked: wish.checked,\n      image: wish.image,\n    });\n  }\n\n  click() {\n    this.setState({\n      edit: true,\n    });\n  }\n\n  render() {\n    const { wish } = this.props;\n    const {\n      confirm, image: imageState, edit, text,\n    } = this.state;\n\n    const image = wish.image ? (<img className=\"wish__image\" alt=\"Awesome\" src={imageState} />) : '';\n\n    const deleteWish = confirm\n      ? (\n        <StyledActionButtons>\n          <Icon type=\"button\" name=\"x\" onClick={this.cancel} />\n          <Icon type=\"button\" name=\"check\" onClick={this.deleteConfirmed} />\n        </StyledActionButtons>)\n      : (\n        <StyledActionButtons>\n          <Icon type=\"button\" name=\"trash-2\" onClick={this.deleteItem} />\n          <Dropzone className=\"wish__wish-dropzone\" onDrop={this.onDrop}>\n            <Icon type=\"button\" name=\"upload\" onClick={() => null} />\n          </Dropzone>\n        </StyledActionButtons>\n      );\n\n    const html = edit\n      ? (<textarea\n        className=\"wish__wish-text wish__wish-text--active\"\n        ref={(c) => { this.input = c; }}\n        onBlur={this.focusLost}\n        onChange={this.updateText}\n        value={text}\n      />\n      )\n      : (<textarea onClick={this.click} className=\"wish__wish-text\" defaultValue={text} />);\n    return (\n      <div className=\"wish__one-wish\">\n\n        <StyledWishAndActions>\n          {html}\n          {deleteWish}\n        </StyledWishAndActions>\n        {image}\n      </div>\n    );\n  }\n}\n\nexport default Wish;\n","import { Wish } from \"../../types/types\";\n\nexport const setWishes = (wishes: Array<Wish>) => (\n  {\n    type: 'SET_OWN_WISHES',\n    wishes,\n  }\n);\n\nexport const storeOwnWishesToFirebase = (wishes: Array<Wish>) => (\n  {\n    type: 'STORE_OWN_WISHES_TO_FIREBASE',\n    wishes,\n  }\n);\n\nexport const storeWishesToFirebase = (uid: string, wishes: Array<Wish>) => (\n  {\n    type: 'STORE_WISHES_TO_FIREBASE',\n    uid,\n    wishes,\n  }\n);\n\nexport const setWishesForUser = (data: any) => (\n  {\n    type: 'SET_USER_WISHES',\n    ...data,\n  }\n);\n","import React from 'react';\nimport { array, any, func } from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport Container from '../common/container/Container';\nimport Wish from '../wish/Wish';\nimport firebase from '../firebase/firebase';\nimport Icon from '../common/Icon';\n\nimport { setWishes, storeOwnWishesToFirebase } from '../../state/actions/wish';\nimport { Wish as WishType, User, FirebaseSnapshot } from '../../types/types';\n\nconst debug = require('debug')('YourWishList');\n\nrequire('./yourwishlist.scss');\n\ninterface P {\n  user: User;\n  updateWishStore: (newWishes: Array<WishType>) => void;\n  storeWishesToFirebase: (newWishes: Array<WishType>) => void;\n  wishes: Array<WishType>;\n}\n\ninterface S {\n  newWish: string;\n  feedback: string;\n}\n\nclass YourWishList extends React.Component<P,S> {\n\n  firebaseRef: any;\n\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      newWish: '',\n      feedback: '',\n    };\n\n    this.addWish = this.addWish.bind(this);\n    this.updateWishState = this.updateWishState.bind(this);\n    this.update = this.update.bind(this);\n    this.deleteThis = this.deleteThis.bind(this);\n    this.addImage = this.addImage.bind(this);\n  }\n\n  componentDidMount() {\n    debug('componentDidMount');\n    const { user, updateWishStore } = this.props;\n\n    this.firebaseRef = firebase.database().ref(`wishes/${user.uid}/wishes`);\n\n    this.firebaseRef.on('value', (snapshot: FirebaseSnapshot) => {\n      updateWishStore(snapshot.val());\n    });\n  }\n\n  componentWillUnmount() {\n    this.firebaseRef.off();\n  }\n\n  /*eslint-disable */\n  createGuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\n    return v.toString(16);\n    });\n  }\n  /* eslint-enable */\n\n\n  updateWishState(e: React.ChangeEvent<HTMLTextAreaElement>) {\n    this.setState({\n      newWish: e.target.value,\n    });\n  }\n\n  addWish(e: React.FormEvent<HTMLFormElement>) {\n    const { user, wishes, storeWishesToFirebase } = this.props;\n    const { newWish } = this.state;\n\n    e.preventDefault();\n\n    if (newWish === '') {\n      this.setState({\n        feedback: 'Ønsket kan ikke være tomt',\n      });\n      return;\n    }\n\n    debug('Adding wish');\n    const newWishList = Object.assign([], wishes);\n    newWishList.unshift({\n      name: newWish,\n      checked: false,\n      checkedby: '',\n      id: this.createGuid(),\n      image: '',\n    });\n\n    storeWishesToFirebase(newWishList);\n\n    this.setState({\n      newWish: '',\n      feedback: '',\n    });\n  }\n\n  update(wish: WishType) {\n    debug('Saving wishlist: ', wish);\n    const { user, wishes, storeWishesToFirebase } = this.props;\n\n    const newWishList = wishes.map((e) => {\n      if (e.id === wish.id) {\n        return {\n          name: wish.name,\n          checked: wish.checked,\n          checkedby: wish.checkedby ? wish.checkedby : '',\n          id: wish.id,\n          image: wish.image ? wish.image : '',\n        };\n      }\n      return e;\n    });\n    storeWishesToFirebase(newWishList);\n  }\n\n  addImage(wish: WishType, image: string) {\n    debug('Adding image to wish: ', wish, image);\n    const { user, wishes, storeWishesToFirebase } = this.props;\n    const newWishList = wishes.map((e) => {\n      if (e.id === wish.id) {\n        return {\n          name: wish.name,\n          checked: wish.checked,\n          checkedby: wish.checkedby ? wish.checkedby : '',\n          id: wish.id,\n          image,\n        };\n      }\n      return e;\n    });\n    storeWishesToFirebase(newWishList);\n  }\n\n  deleteThis(deleteId: string) {\n    debug('Delete id: ', deleteId);\n    const { user, wishes, storeWishesToFirebase } = this.props;\n    const newWishList = Object.assign([], wishes);\n\n    const filteredNewWishList = newWishList.filter((e: WishType) => {\n      debug(e.id);\n      return e.id !== deleteId;\n    });\n\n    debug('Wish list after deletion: ', newWishList);\n\n    storeWishesToFirebase(filteredNewWishList);\n  }\n\n  render() {\n    debug('This.props. ', this.props);\n    const { wishes } = this.props;\n    const { newWish, feedback } = this.state;\n\n    const wishesNew = wishes.map((el: WishType) => {\n      debug('Creating wish based on this el: ', el);\n      return (\n        <Wish\n          key={el.id}\n          update={this.update}\n          delete={this.deleteThis}\n          addImage={this.addImage}\n          wish={el}\n        />);\n    });\n\n    debug('Wishes: ', wishesNew);\n\n    return (\n      <Container>\n\n        <div className=\"flex-row space-between\">\n          <h1>Din ønskeliste</h1>\n        </div>\n\n        <form onSubmit={this.addWish}>\n          <div className=\"your-wishlist_add-wish-wrapper\">\n            <textarea\n              placeholder=\"Legg inn nye ønsker her\"\n              className=\"your-wishlist_add-wish-textarea\"\n              value={newWish}\n              onChange={this.updateWishState}\n            />\n            <Icon type=\"submit\" name=\"check\" onClick={() => null} />\n            <div>{feedback}</div>\n          </div>\n        </form>\n\n        <div className=\"your-wishlist__wishlist\">\n          {wishesNew}\n        </div>\n\n      </Container>\n    );\n  }\n}\n\nexport default connect(\n  ({ wish, user }: { wish: any, user: User}) => {\n    debug('User wishes', wish[user.uid]);\n    return {\n      wishes: wish[user.uid] ? wish[user.uid] : [],\n      user,\n    };\n  },\n  dispatch => ({\n    updateWishStore: (newData: Array<WishType>) => {\n      dispatch(setWishes(newData));\n    },\n    storeWishesToFirebase: (newData: Array<WishType>) => {\n      dispatch(storeOwnWishesToFirebase(newData));\n    },\n  }),\n)(YourWishList);\n","import React from 'react';\nimport { any, func } from 'prop-types';\nimport { Link } from 'react-router-dom';\n\nrequire('./addeduserlink.css');\n\ninterface NewUser {\n  name: string;\n  email: string;\n  uid: string;\n}\n\nconst AddedUserLink = ({ el, deleteMe }: { el: NewUser, deleteMe: (email: string) => void }) => (\n  <div className=\"added-user-link__wrapper flex-row space-between\">\n    <Link className=\"added-user-link__link button smallspace\" to={`/other/${el.uid}`}>\n      {el.name}\n    </Link>\n    <button\n      type=\"button\"\n      className=\"added-user-link__delete smallspace button\"\n      onClick={() => deleteMe(el.email)}\n    >{'Slett'}</button>\n  </div>);\n\nexport default AddedUserLink;\n","import React from 'react';\nimport styled, { keyframes } from 'styled-components';\n\nconst animation = keyframes`\n  0% {\n    top: 6px;\n    height: 51px;\n  }\n  50%, 100% {\n    top: 19px;\n    height: 26px;\n  }\n`;\n\nconst Spinner = styled.div`\n  display: inline-block;\n  position: relative;\n  width: 64px;\n  height: 64px;\n  div {\n    display: inline-block;\n    position: absolute;\n    left: 6px;\n    width: 13px;\n    background: #fff;\n    animation: ${animation} 1.2s cubic-bezier(0, 0.5, 0.5, 1) infinite;\n  }\n  div:nth-child(1) {\n    left: 6px;\n    animation-delay: -0.24s;\n  }\n  div:nth-child(2) {\n    left: 26px;\n    animation-delay: -0.12s;\n  }\n  div:nth-child(3) {\n    left: 45px;\n    animation-delay: 0;\n  }\n`;\n\nexport default () => (\n  <Spinner>\n    <div />\n    <div />\n    <div />\n  </Spinner>\n);\n","import { branch, renderComponent } from 'recompose';\nimport Spinner from './Loading';\n\nexport default (isLoading: any) => branch(\n  isLoading,\n  renderComponent(Spinner), // `Spinner` is a React component\n);\n","import { connect } from 'react-redux';\nimport React from 'react';\nimport { any, array } from 'prop-types';\nimport styled from 'styled-components';\n\nimport AddedUserLink from './addeduserlink/AddedUserLink';\nimport store from '../../store';\nimport Container from '../common/container/Container';\nimport firebase from '../firebase/firebase';\nimport { loadFriends, setFriends } from '../../state/actions/friends';\nimport spinnerWhileLoading from '../common/spinnerWhileLoading';\nimport { User, FirebaseSnapshot } from '../../types/types';\nimport { deleteFriend as deleteFriendAction, addFriend as addFriendAction } from '../../state/actions/friends';\n\nconst debug = require('debug')('OthersWishListSelection');\n\nrequire('./otherswishlistselection.css');\n\nconst StyledHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-left: 2rem;\n  border-bottom: 1px solid black;\n`;\n\ninterface P {\n  user: User;\n  friends: Array<User>;\n  addFriend: (newFriendMail: string) => void;\n  deleteFriend: (email: string) => void;\n  updateFriendStore: (newFriendList: Array<User>) => void;\n  newFriend: User;\n  userNotFound: boolean;\n}\n\ninterface S {\n  newUser: string;\n  feedback: string;\n}\n\nclass OthersWishListSelection extends React.Component<P,S> {\n\n  firebaseRef: any;\n\n  constructor(props: any) {\n    super(props);\n    const { friends } = props;\n    const initialUsers = friends || [];\n\n    this.state = {\n      newUser: '',\n      feedback: '',\n    };\n    this.updateUserState = this.updateUserState.bind(this);\n    this.addUserClickEvent = this.addUserClickEvent.bind(this);\n    this.deleteUser = this.deleteUser.bind(this);\n    this.addUser = this.addUser.bind(this);\n  }\n\n  componentDidMount() {\n    const { user, updateFriendStore } = this.props;\n    const { uid } = user;\n\n    this.firebaseRef = firebase.database().ref(`users/${uid}/friends`);\n    this.firebaseRef.on('value', (snapshot: FirebaseSnapshot) => {\n      updateFriendStore(snapshot.val());\n    });\n  }\n\n  componentWillUnmount() {\n    this.firebaseRef.off();\n  }\n\n  updateUserState(e: React.ChangeEvent<HTMLInputElement>) {\n    debug('updateUserState');\n\n    this.setState({ newUser: e.target.value });\n  }\n\n  addUserClickEvent(e: React.FormEvent<HTMLFormElement>) {\n    debug('addUserClickEvent', e);\n    const { newUser } = this.state;\n\n    e.preventDefault();\n    this.addUser(newUser);\n    this.setState({\n      newUser: ''\n    })\n  }\n\n  addUser(newUserMail: string) {\n    const { addFriend } = this.props;\n    addFriend(newUserMail);\n  }\n\n  deleteUser(email: string) {\n    const { deleteFriend } = this.props;\n    deleteFriend(email);\n  }\n\n  render() {\n    const { newUser, feedback } = this.state;\n    const { friends, newFriend, userNotFound } = this.props;\n\n    const usersLinks = friends.map(el => (<AddedUserLink key={el.uid} deleteMe={this.deleteUser} el={el} />));\n\n    return (\n      <Container>\n        <StyledHeader>\n          <h1>Se ønskeliste til</h1>\n        </StyledHeader>\n        <div className=\"wishlist-selection__added-users-container\">\n          {usersLinks}\n        </div>\n\n        <form onSubmit={this.addUserClickEvent}>\n          <p>Legg til (legg inn epost)</p>\n          <input value={newUser} onChange={this.updateUserState} />\n          <input className=\"button button--padded\" type=\"submit\" value=\"OK\" />\n        </form>\n\n        {userNotFound && <p>Fant ikke bruker</p>}\n        <p>{feedback}</p>\n      </Container>\n    );\n  }\n}\n\nconst WithSpinner = spinnerWhileLoading(({ loaded, loading, load }: { loaded: boolean, loading: boolean, load: () => void}) => {\n  if (!loaded && !loading) {\n    load();\n  }\n  return !loaded;\n})(OthersWishListSelection);\n\nexport default connect(\n  ({ user, friends: { friends, loaded, loading, newFriend, userNotFound } }: { user: User, friends: { friends: Array<User>, loaded: boolean, loading: boolean, newFriend: User, userNotFound: boolean } }) => (\n    {\n      newFriend,\n      userNotFound,\n      user,\n      friends,\n      loaded,\n      loading\n    }\n  ),\n  dispatch => ({\n    load: () => dispatch(loadFriends()),\n    deleteFriend: (email: string) => {\n      dispatch(deleteFriendAction(email));\n    },\n    updateFriendStore(newFriendList: Array<User>) {\n      dispatch(setFriends(newFriendList));\n    },\n    addFriend(newFriendMail: string) {\n      dispatch(addFriendAction(newFriendMail));\n    }\n  }),\n)(WithSpinner);\n","import { User } from \"../../types/types\";\n\nexport const loadFriends = () => ({\n  type: 'LOAD_FRIENDS',\n});\n\nexport const addFriend = (newFriendMail: string) => ({\n  type: 'ADD_FRIEND',\n  newFriendMail\n})\n\nexport const deleteFriend = (email: string) => ({\n  type: 'DELETE_FRIEND',\n  email\n})\n\nexport const setFriends = (newFriendList: Array<User>) => ({\n  type: \"SET_FRIENDS\",\n  newFriendList\n})","import React from 'react';\nimport {\n  any, func, bool,\n} from 'prop-types';\nimport Linkify from 'react-linkify';\nimport firebase from '../firebase/firebase';\nimport Icon from '../common/Icon';\n\nimport './otherwish.css';\nimport { Wish } from '../../types/types';\n\nconst storageRef = firebase.storage().ref();\n\nconst debug = require('debug')('OtherWish');\n\ninterface P {\n  wishInfo: Wish;\n  canDelete: boolean;\n  deleteSuggestion: () => void;\n  onClick: Function;\n};\n\ninterface S {\n  image: string;\n}\n\nclass OtherWish extends React.Component<P,S> {\n  constructor(props: any) {\n    super(props);\n\n    this.state = {\n      image: '',\n    };\n\n    if (props.wishInfo.image) {\n      storageRef.child(props.wishInfo.image).getDownloadURL().then((url) => {\n        debug('url: ', url);\n        this.setState({\n          image: url,\n        });\n      });\n    }\n  }\n\n  render() {\n    const {\n      wishInfo, canDelete, deleteSuggestion, onClick,\n    } = this.props;\n    const { image } = this.state;\n\n    const imageTag = wishInfo.image\n      ? (<img className=\"other-wish__image\" alt=\"Awesome\" src={image} />) : '';\n\n    const item = wishInfo.checked\n      ? (\n        <del>{wishInfo.name}</del>\n      )\n      : wishInfo.name;\n    const linkifyed = (\n      <Linkify className=\"other-wish__linkify\">{item}</Linkify>\n    );\n    const checkedByElem = wishInfo.checked\n      ? (\n        <div className=\"smallspace\">Tatt</div>) : '';\n\n    const deleteThis = canDelete\n      ? (\n        <button\n          type=\"button\"\n          className=\"button other-wish__button_delete-suggestion\"\n          onClick={deleteSuggestion}\n        >\n          {'Slett'}\n        </button>\n      ) : '';\n\n    return (\n      <div className=\"flex-column border\">\n        <div className=\"flex-row other-wish__upper-half\">\n          <div className=\"flex-column smallspace other-wish__wish-text\">\n            {linkifyed}\n            {imageTag}\n          </div>\n          <div className=\"other-wish__buy-or-sell-wrapper\">\n\n            <Icon type=\"button\" name={wishInfo.checked ? 'shopping-cart' : 'shopping-cart'} onClick={() => onClick(wishInfo.id)} />\n            {deleteThis}\n          </div>\n        </div>\n        <div className=\"flex-column\">\n          {checkedByElem}\n        </div>\n\n      </div>\n    );\n  }\n}\n\nexport default OtherWish;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Dispatch } from 'redux';\nimport styled from 'styled-components';\n\nimport Container from '../common/container/Container';\nimport firebase from '../firebase/firebase';\n// import Comments from './Comments';\n// import Suggestions from '../suggestions/Suggestions';\nimport OtherWish from './OtherWish';\nimport { setWishesForUser, storeWishesToFirebase } from '../../state/actions/wish';\nimport Icon from '../common/Icon';\nimport { User, Wish, Match } from '../../types/types';\nimport { ApplicationState } from '../../state/reducers';\nimport spinnerWhileLoading from '../common/spinnerWhileLoading';\nimport { loadFriends } from '../../state/actions/friends';\n\nconst ActionButtonsContainer = styled.div`\n  display: flex;\n  justify-content: flex-end;\n`;\n\nconst debug = require('debug')('OthersWishList');\n\ninterface Props {\n  match: { params: { name: string }};\n  setWishes: (name: string, newWishList: Array<Wish>) => void;\n  storeWishes: (name: string, newWishList: Array<Wish>) => void;\n  user: User;\n  wishes: Array<Wish>;\n  friend: User;\n}\ninterface State {\n  hideSelected: boolean;\n  feedback: string;\n}\nclass OthersWishList extends React.Component<Props, State> {\n  firebaseRef?: firebase.database.Reference;\n\n  constructor(props: any) {\n    super(props);\n    debug('constructor');\n    this.state = {\n      hideSelected: true, feedback: '',\n    };\n    this.check = this.check.bind(this);\n    this.toggleShowSelected = this.toggleShowSelected.bind(this);\n    this.shouldDisplayWish = this.shouldDisplayWish.bind(this);\n  }\n\n  componentDidMount() {\n    debug('componentDidMount');\n    const { match: { params: { name } }, setWishes } = this.props;\n\n    this.firebaseRef = firebase.database().ref(`wishes/${name}/wishes`);\n\n    this.firebaseRef.on('value', (snapshot) => {\n      setWishes(name, snapshot && snapshot.val());\n    });\n  }\n\n  componentWillUnmount() {\n    this.firebaseRef && this.firebaseRef.off();\n  }\n\n  check(id: string) {\n    debug('check', id);\n    const { user, match: { params: { name } } } = this.props;\n    const { wishes, storeWishes } = this.props;\n\n    const newWishList = wishes.map((e) => {\n      if (id === e.id) {\n        console.log(e);\n        return {\n          name: e.name,\n          checked: !e.checked,\n          id: e.id,\n          checkedby: user.email,\n          checkedTime: new Date(),\n          image: e.image || ''\n        };\n      }\n\n      return e;\n    });\n    console.log(newWishList);\n    storeWishes(name, newWishList);\n    this.setState({ feedback: 'Du kjøpte eller solgte noe!' });\n  }\n\n  toggleShowSelected(e: React.MouseEvent<HTMLElement>) {\n    debug('toggleShowSelected', e);\n    const { hideSelected } = this.state;\n\n    e.preventDefault();\n    this.setState({\n      hideSelected: !hideSelected,\n    });\n  }\n\n  shouldDisplayWish(el: Wish) {\n    const {\n      hideSelected,\n    } = this.state;\n\n    debug('Wish to be filtered: ', el);\n    return !el.checked || !hideSelected;\n  }\n\n  render() {\n    const {\n      hideSelected, feedback,\n    } = this.state;\n    const { wishes, friend } = this.props;\n\n    const filteredWishes = wishes.filter(this.shouldDisplayWish).map(wishInfo => (\n      <OtherWish deleteSuggestion={() => null} canDelete={false} key={wishInfo.id} onClick={this.check} wishInfo={wishInfo} />));\n\n    return (\n      <Container>\n\n        <div className=\"flex-row space-between\">\n          <h1 className=\"shrink overflow-hidden\">\n            {`Ønskelisten til ${friend.name}`}\n          </h1>\n        </div>\n        <ActionButtonsContainer>\n          <Icon type=\"button\" name={hideSelected ? 'eye' : 'eye-off'} onClick={this.toggleShowSelected} />\n        </ActionButtonsContainer>\n        <p>{feedback}</p>\n\n        {filteredWishes}\n\n        {/* <Suggestions username={userState} userUid={params.name} />\n        <hr />\n        <Comments params={params} /> */}\n\n      </Container>\n    );\n  } \n}\n\nconst mapStateToProps = ({ wish, user, friends: { loading, loaded, friends } }: ApplicationState, { match: { params: { name } } }: any) => {\n  const friendsFiltered = friends.filter(u => u.uid === name);\n\n  return {\n    wishes: wish[name] || [],\n    user,\n    loading,\n    loaded,\n    friend: friendsFiltered.length > 0 ? friendsFiltered.reduce(e => e) : {}\n  }\n};\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\n  load: () => dispatch(loadFriends()),\n  setWishes(uid: string, newWishList: Array<Wish>) {\n    dispatch(setWishesForUser({ uid, wishes: newWishList }));\n  },\n  storeWishes(uid: string, newWishList: Array<Wish>) {\n    dispatch(storeWishesToFirebase(uid, newWishList));\n  },\n});\n\nconst WithSpinner = spinnerWhileLoading(({ loaded, loading, load }: { loaded: boolean, loading: boolean, load: () => void}) => {\n  if (!loaded && !loading) {\n    load();\n  }\n  return !loaded;\n})(OthersWishList);\n\nconst OthersWishListWrapper = connect(mapStateToProps, mapDispatchToProps)(WithSpinner);\n\nexport default OthersWishListWrapper;\n","import { User } from \"../../types/types\";\n\nexport const setNameAndEmail = (name: string, email?: string) => ({\n  type: 'SET_NAME_AND_EMAIL',\n  name,\n  email\n});\n\nexport const userLoaded = (user: User | null) => (\n  {\n    type: 'USER_LOADED',\n    user,\n  }\n);\n\nexport const logout = () => (\n  {\n    type: 'LOG_OUT',\n  }\n);\n","import Color from 'color';\n\nexport const gold = \"#b49b57\";\nexport const goldDark = Color(gold).fade(.7).string();\n\nexport default {\n  gold,\n  goldDark,\n}","import styled from 'styled-components';\nimport { Link as RouterLink, NavLink as RouterNavLink } from 'react-router-dom';\nimport * as colors from '../../styles/colors';\nimport Color from 'color';\n\nexport const Link = styled(RouterLink)`\n  text-decoration: none;\n  border-bottom: 2px solid ${colors.gold};\n  font-weight: 400;\n  &:visited {\n    color: white;\n  }\n  &:hover {\n    color: grey;\n  }\n`;\n\nexport const NavLink = styled(RouterNavLink)`\n  background: ${colors.goldDark};\n  color: ${Color('white').darken(.3).string()};\n  text-decoration: none;\n  padding: .8rem;\n  &.selected {\n    color: white;\n    background: ${colors.gold};\n  }\n`;\n\nexport default {\n  Link,\n  NavLink,\n};\n","import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { connect } from 'react-redux';\nimport { Dispatch } from 'redux';\n\nimport firebase from '../firebase/firebase';\nimport { logout as logoutAction } from '../../state/actions/user';\nimport { ApplicationState } from '../../state/reducers';\nimport { UserState } from '../../state/reducers/types';\nimport { APP_TITLE } from '../../constants';\nimport { NavLink } from '../common/Link';\nimport { RouterProps } from 'react-router';\nimport { RouteComponentProps } from 'react-router-dom';\n\nconst StyledHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nfunction logOut(setFeedback: (n: string) => void, logout: () => void) {\n  firebase.auth().signOut().then(() => {\n    setFeedback('Du er nå logget ut');\n    logout();\n  }, (e) => {\n    console.log(e);\n    setFeedback('Noe gikk galt under utlogging.');\n  });\n}\n\nconst othersActive = (match: any, location: any) => location.pathname.startsWith(\"/other\");\n\nexport interface HeaderProps {\n  user?: UserState;\n  logout: () => void;\n}\nconst HeaderComponent = ({ user, logout }: HeaderProps) => {\n  const [feedback, setFeedback] = useState('');\n\n  if (!user || !user.uid) {\n    return null;\n  }\n\n  const H1 = styled.h1`\n    color: white;\n  `;\n  const UserEmail = styled.span`\n    margin-right: 10px;\n  `;\n  const UserInfo = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    margin-bottom: .5rem;\n    padding-right: .5rem;\n  `;\n  const ActionButtons = styled.div`\n    display: flex;\n    width: 100%;\n  `;\n  const CustomNavLink = styled(NavLink)`\n    width: 50%;\n  `;\n  return (\n    <>\n      <H1>{APP_TITLE}</H1>\n      <UserInfo>\n        <UserEmail>{user ? user.email : 'Ukjent'}</UserEmail>\n        <button type=\"button\" className=\"button-navigation button--square\" onClick={() => logOut(setFeedback, logout)}>Logg ut</button>\n        {feedback}\n      </UserInfo>\n      <StyledHeader>\n        <ActionButtons>\n          <CustomNavLink activeClassName=\"selected\" exact to=\"\">Mine ønsker</CustomNavLink>\n          <CustomNavLink activeClassName=\"selected\" isActive={othersActive} to=\"/others\">Vennelister</CustomNavLink>\n        </ActionButtons>\n      </StyledHeader>\n    </>\n  );\n};\n\nconst mapStateToProps = ({ user }: ApplicationState) => ({ user });\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\n  logout() {\n    dispatch(logoutAction());\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HeaderComponent);\n","export const APP_TITLE = 'GAVEØNSKE.NO';\n\n","import firebase from './firebase';\n\nconst provider = new firebase.auth.FacebookAuthProvider();\nexport default provider;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  id: \"Blue_1_\",\n  fill: \"#3C5A99\",\n  d: \"M248.082,262.307c7.854,0,14.223-6.369,14.223-14.225V18.812 c0-7.857-6.368-14.224-14.223-14.224H18.812c-7.857,0-14.224,6.367-14.224,14.224v229.27c0,7.855,6.366,14.225,14.224,14.225 H248.082z\"\n});\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  id: \"f\",\n  fill: \"#FFFFFF\",\n  d: \"M182.409,262.307v-99.803h33.499l5.016-38.895h-38.515V98.777c0-11.261,3.127-18.935,19.275-18.935 l20.596-0.009V45.045c-3.562-0.474-15.788-1.533-30.012-1.533c-29.695,0-50.025,18.126-50.025,51.413v28.684h-33.585v38.895h33.585 v99.803H182.409z\"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    version: 1.1,\n    id: \"Layer_1\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    width: \"266.893px\",\n    height: \"266.895px\",\n    viewBox: \"0 0 266.893 266.895\",\n    enableBackground: \"new 0 0 266.893 266.895\",\n    xmlSpace: \"preserve\"\n  }, props), _ref, _ref2);\n};\n\nexport default __webpack_public_path__ + \"static/media/facebook-icon.3ae13bc8.svg\";\nexport { SvgComponent as ReactComponent };","import styled, { keyframes } from 'styled-components';\n\nconst spinnerKeyframe = keyframes`\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n`;\n\nconst Spinner = styled.div`\n  display: flex;\n  width: 24px;\n  height: 24px;\n  justify-content: center;\n  align-items: center;\n  &::after {\n    content: \" \";\n    display: block;\n    width: 24px;\n    height: 24px;\n    transform: translateY(50%);\n    border-radius: 50%;\n    border: 3px solid #fff;\n    border-color: #fff transparent #fff transparent;\n    animation: ${spinnerKeyframe} 1.2s linear infinite;\n  }\n`;\n\nexport default Spinner;\n","import styled from 'styled-components';\nimport colors from '../../styles/colors';\n\nconst BorderStyles = `\n  border: 2px solid ${colors.gold};\n  padding: 7px 14px;\n  background: transparent;\n  border-radius: 8px;\n  outline: none;\n  font-size: 16px;\n  color: white;\n  max-width: 300px;\n  min-height: 48px;\n  margin-bottom: 16px;\n`;\n\nexport const BorderButton = styled.button`\n  ${BorderStyles}\n`;\n\nexport const BorderInput = styled.input`\n  ${BorderStyles}\n`;\n\nexport default {\n  BorderButton,\n  BorderInput,\n}","import React from 'react';\nimport styled from 'styled-components';\n\nimport facebook from '../firebase/facebooklogin';\nimport firebase from '../firebase/firebase';\n\nimport { ReactComponent as FbIcon } from './facebook-icon.svg';\nimport Spinner from '../common/Spinner';\nimport { Link } from '../common/Link';\nimport { BorderButton } from '../common/Button';\nimport { User } from '../../types/types';\n\nconst debug = require('debug')('ThirdPartyLogin');\n\nconst iconHeight = '30px';\nconst FacebookIcon = styled(FbIcon)`\n  font-size: 1em;\n  height: ${iconHeight};\n  width: ${iconHeight};\n  margin-right: 6px;\n`;\n\nconst ButtonSpinner = styled(Spinner)`\n  margin: 0 auto;\n`;\n\ninterface State {\n  submitting: boolean;\n}\nclass ThirdPartyLogin extends React.Component<{}, State> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      submitting: false\n    };\n    this.loginFacebook = this.loginFacebook.bind(this);\n  }\n\n  loginFacebook(e: React.MouseEvent<HTMLButtonElement>) {\n    debug('loginFacebook', e);\n\n    e.preventDefault();\n    e.stopPropagation();\n    this.setState({ submitting: true });\n    firebase.auth().signInWithRedirect(facebook);\n  }\n\n  render() {\n    const SmButton = styled(BorderButton)`\n      display: flex;\n      align-items: center;\n      width: 100%;`;\n    \n    return (\n      <>\n        <SmButton\n          onClick={this.loginFacebook}\n        >\n          { this.state.submitting ?\n            <ButtonSpinner />\n            : <>\n              <FacebookIcon />\n              Logg på med facebook\n            </>\n          }\n          \n        </SmButton>\n        <Link to=\"/internal\">Passord/brukernavn?</Link>\n      </>\n    );\n  }\n}\n\nexport default ThirdPartyLogin;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Link } from '../common/Link';\nimport colors from '../../styles/colors';\nimport { BorderInput } from '../common/Button';\nimport firebase from '../firebase/firebase';\nimport { string } from 'prop-types';\n\nconst debug = require('debug')('InternalLogin');\n\n\nconst StyledInput = styled.input`\n  height: 2.5rem;\n  outline: none;\n  padding: 0 1rem;\n  margin-bottom: 12px;\n  border: 0;\n  -webkit-appearance: none;\n  background: ${colors.goldDark};\n  color: white;\n  width: 100%;\n  &::placeholder {\n    color: grey;\n  }\n`;\n\nconst SubmitButton = styled(BorderInput)`\n  width: 100%;\n`;\n\ninterface State {\n  user: string;\n  password: string;\n  submitting: boolean;\n  errorMessage: string;\n}\nclass InternalLogin extends React.Component<{}, State> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      user: '',\n      password: '',\n      submitting: false,\n      errorMessage: ''\n    };\n    this.updateUserState = this.updateUserState.bind(this);\n    this.updatePasswordState = this.updatePasswordState.bind(this);\n    this.logIn = this.logIn.bind(this);\n  }\n  updateUserState(e: React.ChangeEvent<HTMLInputElement>) {\n    debug('updateUserState', e);\n\n    this.setState({\n      user: e.target.value,\n    });\n  }\n\n  updatePasswordState(e: React.ChangeEvent<HTMLInputElement>) {\n    debug('updatePasswordState', e);\n\n    this.setState({\n      password: e.target.value,\n    });\n  }\n\n  logIn(e: React.FormEvent<HTMLFormElement>) {\n    debug('logIn', e);\n    const { user, password } = this.state;\n\n    debug('Logging user in with the following credentials: ', user, password);\n    e.preventDefault();\n\n    this.setState({\n      submitting: true\n    });\n\n    firebase.auth().signInWithEmailAndPassword(user, password).catch((error: any) => {\n      const errorCode = error.code;\n      const errorMessage = error.message;\n\n      debug('Errorcode: ', errorCode, 'errorMessage', errorMessage);\n\n      if (errorCode) {\n        this.setState({\n          errorMessage: 'Klarte ikke å logge deg inn, beklager det.',\n        });\n      }\n    });\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.logIn}>\n      <label htmlFor=\"username\" className=\"screen-reader-only\">Brukernavn</label>\n      <StyledInput id=\"username\" value={this.state.user} onChange={this.updateUserState} placeholder=\"Brukernavn\" />\n\n      <label htmlFor=\"password\" className=\"screen-reader-only\">Passord</label>\n      <StyledInput\n        id=\"password\"\n        type=\"text\"\n        placeholder=\"Passord\"\n        value={this.state.password}\n        onChange={this.updatePasswordState}\n      />\n        <SubmitButton type=\"submit\" value=\"Logg inn\" />\n        <p>{this.state.errorMessage}</p>\n        <Link to=\"/\">Google/Facebook</Link>\n      </form>\n    );\n  }\n}\n\nexport default InternalLogin;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport { Switch, Route, BrowserRouter } from 'react-router-dom';\n\nimport firebase from '../firebase/firebase';\nimport facebook from '../firebase/facebooklogin';\nimport { User } from '../../types/types';\nimport ThirdPartyLogin from './ThirdPartyLogin';\nimport InternalLogin from './InternalLogin';\nimport colors from '../../styles/colors';\n\nconst debug = require('debug')('SelectUser');\n\nrequire('./selectuser.scss');\n\nconst StyledParagraph = styled.p`\n  font-size: 3rem;\n  margin: 2rem;\n`;\n\nconst StyledCircleContainer = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n`;\n\nfunction getRandomInt(min: number, max: number) {\n  var num = Math.floor((Math.random() * Math.floor(max)));\n  if(num < min) {\n    num += min;\n  }\n  return num;\n}\n\ninterface StyledCircleProps {\n  size: string;\n  top: string;\n  left: string;\n}\n\nconst StyledCircle = styled.div`\n  background-color: ${colors.goldDark};\n  border-radius: 50%;\n  filter: opacity(.5);\n  position: absolute;\n  width: ${(props: StyledCircleProps) => props.size};\n  height: ${props => props.size};\n  top: ${props => props.top};\n  left: ${props => props.left};\n`;\n\nconst LoginContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  color: white;\n  height: 100%;\n`;\n\ninterface Props {\n  user: User;\n}\ninterface State {\n  user: string;\n  password: string;\n  feedback: string;\n  submitting: boolean;\n}\nclass Login extends React.Component<Props, State> {\n  constructor(props: any) {\n    super(props);\n    debug('constructor');\n    this.state = {\n      user: '',\n      password: '',\n      feedback: '',\n      submitting: false,\n    };\n  }\n\n  componentDidMount() {\n\n    debug('componentDidMount');\n\n    firebase.auth().getRedirectResult().then(() => {\n      debug('Login was apparently successful');\n    }).catch((error) => {\n      debug('Facebook login failed: ', error);\n\n      if (error) {\n        this.setState({\n          feedback: 'Klarte ikke å logge deg inn med facebook, beklager det.',\n        });\n      }\n    });\n  }\n\n  render() {\n    const { feedback } = this.state;\n\n    const H1 = styled.h1`\n      color: white;\n      font-weight: 400;\n    `;\n\n    const circles = Array(15).fill(0).map(\n      (el, index) =>\n        <StyledCircle\n          key={index}\n          size={`${getRandomInt(50, 500)}px`}\n          top={`${getRandomInt(0, 100)}%`}\n          left={`${getRandomInt(0, 100)}%`} />);\n\n    return (\n      <BrowserRouter>\n        <LoginContainer>\n          <H1>GAVEØNSKE.NO</H1>\n          <Switch>\n            <Route path=\"/internal\" component={InternalLogin} />\n            <Route component={ThirdPartyLogin} />\n          </Switch>\n          <StyledParagraph>{feedback}</StyledParagraph>\n          <StyledCircleContainer>\n            {circles}\n          </StyledCircleContainer>\n        </LoginContainer>\n      </BrowserRouter>\n    );\n  }\n}\n\nconst mapStateToProps = ({ user }: { user: User }) => (\n  {\n    user,\n  });\n\nexport default connect(\n  mapStateToProps, null,\n)(Login);\n","import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { connect } from 'react-redux';\nimport { setNameAndEmail as setNameAction } from '../../state/actions/user';\nimport { User } from '../../types/types';\n\nconst SetNameContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  color: white;\n  height: 100%;\n`;\n\nfunction submit(e: React.FormEvent<HTMLFormElement>, setTheName: (thename: string, email: string) => void, name: string, email: string) {\n  e.preventDefault();\n  setTheName(name, email);\n}\n\nexport function SetNameFunc({ setTheName, user }: { setTheName: (name: string) => void, user: User }) {\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState(user.email);\n\n  return (\n    <SetNameContainer>\n      <form onSubmit={(e) => submit(e, setTheName, name, email)}>\n        <label htmlFor=\"name\">Velg navn</label>\n        <input type=\"text\" id=\"name\" value={name} onChange={(e: any) => setName(e.target.value)} />\n        <label htmlFor=\"email\">Epost</label>\n        <input disabled={!(user.email === null || user.email === '')} type=\"text\" id=\"email\" value={email} onChange={(e: any) => setEmail(e.target.value)} />\n        <input type=\"submit\" value=\"OK\" />\n      </form>\n\n    </SetNameContainer>);\n}\n\nexport default connect(({ user }: { user: User }) => ({\n  user\n}),\n  dispatch => ({\n    setTheName(name: string, email?: string) {\n      dispatch(setNameAction(name, email));\n    }\n  }))(SetNameFunc);","import { Reducer } from \"redux\";\nimport { UserState } from \"./types\";\n\nconst initialState: UserState = {\n  loaded: false,\n  uid: undefined,\n  email: undefined\n};\nconst debug = require('debug')('userReducer');\n\n\nconst userReducer: Reducer<UserState> = (state = initialState, action) => {\n  debug('Input: state: ', state, '. Action: ', action);\n\n  switch (action.type) {\n    case 'USER_LOADED': {\n      if (action.user) {\n        const { uid, email, name } = action.user;\n        return {\n          ...state,\n          uid,\n          email,\n          name,\n          loaded: true,\n        };\n      }\n      return {\n        ...state,\n        loaded: true,\n      };\n    }\n    case 'LOG_OUT': {\n      return initialState;\n    }\n    default:\n      return { ...state };\n  }\n};\n\nexport default userReducer;\n","import { Reducer } from 'redux';\nimport { WishState } from './types';\n\nconst initialState: WishState = {};\n\nconst userReducer: Reducer<WishState> = (state = initialState, action) => {\n  switch (action.type) {\n    case 'SET_ALL_WISHES': {\n      return Object.assign({}, action.wishes);\n    }\n    case 'SET_USER_WISHES': {\n      const { uid } = action;\n      return {\n        ...state,\n        [uid]: action.wishes,\n      };\n    }\n    default:\n      return state;\n  }\n};\n\nexport default userReducer;\n","import { Reducer } from 'redux';\nimport { FriendsState } from './types';\n\nconst initialState: FriendsState = {\n  loaded: false,\n  loading: false,\n  friends: [],\n  userNotFound: false,\n  newFriend: undefined\n};\n\nconst reducer: Reducer<FriendsState> = (state = initialState, action) => {\n  switch (action.type) {\n    case 'LOAD_FRIENDS': {\n      return {\n        ...state,\n        loading: true,\n      };\n    }\n    case 'SET_FRIENDS': {\n      return {\n        ...state,\n        friends: action.newFriendList,\n      };\n    }\n    case 'FRIENDS_LOADED': {\n      return {\n        ...state,\n        friends: action && action.data && action.data.filter((el:any) => el),\n        loading: false,\n        loaded: true,\n      };\n    }\n    case 'FRIEND_NOT_FOUND': {\n      return {\n        ...state,\n        userNotFound: true\n      };\n    }\n    default:\n      return { ...state };\n  }\n};\n\nexport default reducer;","import { combineReducers } from 'redux';\nimport user from './user';\n// import suggestion from './suggestion';\nimport wish from './wish';\nimport friends from './friends';\nimport { UserState, WishState, FriendsState } from './types';\n\nexport interface ApplicationState {\n  user: UserState,\n  wish: WishState,\n  friends: FriendsState\n} \n\nconst onskdegReducers = combineReducers<ApplicationState>({\n  user,\n  // suggestion,\n  wish,\n  friends,\n} as any);\n\nexport default onskdegReducers;\n","export const user = (state: any) => state.user;\nexport const friends = (state: any) => state.friends.friends;\n","import {\n    put, takeEvery, select, call,\n} from 'redux-saga/effects';\nimport firebase from '../../components/firebase/firebase';\nimport { user as userSelect, friends as friendsSelect } from '../selectors/selectors';\nimport { User } from '../../types/types';\n\nfunction getUserList(currentUser: User) {\n    return new Promise(((resolve) => {\n        firebase.database().ref(`users/${currentUser.uid}/friends`).once('value', (snapshot) => {\n            if (snapshot == null) {\n                return;\n            }\n            const resolveVal = snapshot.val();\n            resolve(resolveVal);\n        });\n    }));\n}\n\nfunction* loadUserList() {\n    const currentUser = yield select(userSelect);\n    const data = yield call(getUserList, currentUser);\n    yield put({ type: 'FRIENDS_LOADED', data });\n}\n\nfunction getFriendByEmail(mail: string) {\n    return new Promise((resolve, reject) => {\n        firebase.database().ref(`users`).once('value', (snapshot) => {\n            if (snapshot == null) {\n                return;\n            }\n            const usersObj = snapshot.val();\n            const userlistKeys = Object.keys(usersObj);\n            const userlist = userlistKeys.map(key => usersObj[key]);\n\n            const filteredList: Array<User> = userlist.filter((user: User) => user.email === mail);\n\n            if (filteredList.length == 1) {\n                resolve(filteredList.reduce((e: User) => e));\n            }\n            else {\n                resolve();\n            }\n        });\n    });\n}\n\nfunction* addFriend(input: any) {\n    const user = yield select(userSelect);\n    const friends = yield select(friendsSelect);\n    const { uid } = user;\n    const { newFriendMail }: { newFriendMail: string } = input;\n    const newFriend = yield getFriendByEmail(newFriendMail);\n    if (newFriend) {\n        const newUserList = [newFriend, ...friends];\n        firebase.database().ref(`users/${uid}/friends`).set(newUserList);\n        yield put({ type: 'FRIEND_FOUND_AND_ADDED', newFriend });\n    }\n    else {\n        yield put({ type: 'FRIEND_NOT_FOUND' });\n    }\n\n}\n\nfunction* deleteFriend(input: any) {\n    const user = yield select(userSelect);\n    const friends = yield select(friendsSelect);\n    const { uid } = user;\n    const { email } = input;\n\n    const newUserList = friends.filter((friend: User) => friend.email !== email);\n    firebase.database().ref(`users/${uid}/friends`).set(newUserList);\n}\n\nfunction* setNameAndEmail(input: any) {\n    const { name, email } = input;\n\n    const user = yield select(userSelect);\n    firebase.database().ref(`users/${user.uid}/name`).set(name);\n    if (email) {\n        firebase.database().ref(`users/${user.uid}/email`).set(email);\n    }\n    yield put({\n        type: 'USER_LOADED',\n        user: {\n            ...user,\n            name\n        }\n    });\n}\n\nexport function* userSaga() {\n    yield takeEvery('LOAD_FRIENDS', loadUserList);\n    yield takeEvery('ADD_FRIEND', addFriend);\n    yield takeEvery('DELETE_FRIEND', deleteFriend);\n    yield takeEvery('SET_NAME_AND_EMAIL', setNameAndEmail);\n}\n\n","import {\n  put, takeEvery, select,\n} from 'redux-saga/effects';\nimport firebase from '../../components/firebase/firebase';\nimport { user as userSelect, friends as friendsSelect } from '../selectors/selectors';\nimport { setWishesForUser, storeWishesToFirebase } from '../actions/wish';\n\nfunction* setOwnWishes(input: any) {\n  const { wishes } = input;\n  const { uid } = yield select(userSelect);\n\n  yield put(setWishesForUser({ uid, wishes }));\n}\n\nfunction storeWishes(input: any) {\n  const { uid, wishes } = input;\n  firebase.database().ref(`wishes/${uid}/wishes`).set(wishes);\n}\n\nfunction* storeWishesToFirebaseSaga(input: any) {\n  const currentUser = yield select(userSelect);\n  const { uid } = currentUser;\n  const { wishes } = input;\n  yield put(storeWishesToFirebase(uid, wishes));\n}\n\nexport function* wishSaga() {\n  yield takeEvery('SET_OWN_WISHES', setOwnWishes);\n  yield takeEvery('STORE_WISHES_TO_FIREBASE', storeWishes);\n  yield takeEvery('STORE_OWN_WISHES_TO_FIREBASE', storeWishesToFirebaseSaga);\n}","import { put, takeEvery, all } from 'redux-saga/effects';\nimport { userSaga } from './usersaga';\nimport { wishSaga } from './wishsaga';\n\nexport default function* rootSaga() {\n    yield all([\n      userSaga(),\n      wishSaga()\n    ])\n  }","import { createStore, applyMiddleware, compose } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\n\n\nimport reducer from './state/reducers';\nimport rootSaga from './state/sagas';\n\nconst sagaMiddleware = createSagaMiddleware();\n\n/* eslint-disable no-underscore-dangle */\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n/* eslint-enable */\n\nconst store = createStore(\n  reducer, /* preloadedState, */\n  composeEnhancers(applyMiddleware(sagaMiddleware)),\n);\n\nsagaMiddleware.run(rootSaga);\n\nexport default store;\n","import firebase from './firebase';\nimport { userLoaded } from '../../state/actions/user';\nimport store from '../../store';\nimport { User, FirebaseSnapshot } from '../../types/types';\n\nconst debug = require('debug')('authFirebase');\n\nconst obj = {\n  authChangeListener() {\n    firebase.auth().onAuthStateChanged((user: User) => {\n      debug('onAuthStateChanged. User logged in: ', user);\n\n      if (user) {\n        firebase.database().ref(`users/${user.uid}/name`).once('value', (snapshot) => {\n          const name = snapshot.val();\n          store.dispatch(userLoaded({ ...user, name}));\n        });\n        \n      } else {\n        store.dispatch(userLoaded(null));\n      }\n    });\n  },\n};\nexport default obj;\n","import React from 'react';\nimport {\n  BrowserRouter, Route, Switch, withRouter,\n} from 'react-router-dom';\nimport { Provider, connect } from 'react-redux';\n\nimport YourWishList from './components/yours/YourWishList';\nimport OthersWishListSelection from './components/otherwishlistselection/OthersWishListSelectionWrapper';\nimport OthersWishList from './components/others/OthersWishList';\nimport Header, { HeaderProps } from './components/header/Header';\nimport Login from './components/login/Login';\nimport SetName from './components/setname/SetName';\n\nimport store from './store';\n\nimport authFirebase from './components/firebase/authFirebase';\nimport { ApplicationState } from './state/reducers';\nimport { UserState } from './state/reducers/types';\nimport Loading from './components/common/Loading';\n\ninterface AppProps {\n  user: UserState;\n}\n\n// To prevent route update blockin\nconst HeaderWithRouter = withRouter<any>(Header);\nconst AppComp = ({ user } : AppProps) => {\n  if (!user || !user.loaded) {\n    return <Loading />;\n  }\n  if (!user.uid) {\n    return <Login />;\n  }\n\n  if (!user.name) {\n    return <SetName />;\n  }\n\n  return (\n    <BrowserRouter>\n      <React.Fragment>\n        <HeaderWithRouter />\n        <Switch>\n          <Route path=\"/\" exact component={YourWishList} />\n          <Route path=\"/others\" component={OthersWishListSelection} />\n          <Route path=\"/other/:name\" component={OthersWishList} />\n        </Switch>\n      </React.Fragment>\n    </BrowserRouter>\n  );\n};\n\nconst mapStateToProps = ({ user }: ApplicationState) => ({ user });\nconst AppCompWrapper = connect(mapStateToProps)(AppComp);\n\nconst App = () => (\n  <Provider store={store}>\n    <AppCompWrapper />\n  </Provider>\n);\n\nauthFirebase.authChangeListener();\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './global.scss';\nimport './index.scss';\nimport App from './App';\n\nif ('serviceWorker' in navigator) {\n    window.addEventListener('load', function() {\n      navigator.serviceWorker.register('/service-worker.js');\n    });\n  }\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}