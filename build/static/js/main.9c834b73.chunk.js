(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,n){},104:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(34),s=n.n(r),c=(n(64),n(66),n(107)),u=n(109),o=n(108),l=n(14),d=n(15),h=n(16),f=n(18),m=n(17),b=n(19),p=n(4),v=n(7),g=n(8),O=n(105);n(71);var k=function(e){var t=e.el,n=e.deleteMe;return i.a.createElement("div",{className:"added-user-link__wrapper flex-row space-between"},i.a.createElement(O.a,{className:"added-user-link__link button smallspace",to:"/other/".concat(t.uid)},t.name),i.a.createElement("button",{type:"button",className:"added-user-link__delete smallspace button",onClick:function(){return n(t.email)}},"Slett"))};function w(){var e=Object(v.a)(["\n  margin: 10px auto;\n  border: 1px solid black;\n  padding: 10px;\n  border-radius: 5px;\n  background-color: white;\n  max-width: 900px;\n"]);return w=function(){return e},e}var E=g.a.div(w()),j=n(41),S=n.n(j);S.a.initializeApp({apiKey:"AIzaSyDRCFzLXgaM36t-0Vnhp2XbbQJrUjDmQAw",authDomain:"onskdeg.firebaseapp.com",databaseURL:"https://onskdeg.firebaseio.com",storageBucket:"onskdeg.appspot.com",messagingSenderId:"776764935060"});var x=S.a,y=n(43),_=function(){return i.a.createElement("div",null,"Laster")};function W(){var e=Object(v.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-left: 2rem;\n  border-bottom: 1px solid black;\n"]);return W=function(){return e},e}var D=n(23)("OthersWishListSelection");n(80);var U,I=g.a.div(W()),N=function(e){function t(e){var n;Object(d.a)(this,t),n=Object(f.a)(this,Object(m.a)(t).call(this,e));var a=e.friends||[];return n.state={users:a,newUser:"",feedback:""},n.updateUserState=n.updateUserState.bind(Object(p.a)(Object(p.a)(n))),n.addUserClickEvent=n.addUserClickEvent.bind(Object(p.a)(Object(p.a)(n))),n.deleteUser=n.deleteUser.bind(Object(p.a)(Object(p.a)(n))),n.addUser=n.addUser.bind(Object(p.a)(Object(p.a)(n))),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"updateUserState",value:function(e){D("updateUserState"),this.setState({newUser:e.target.value})}},{key:"addUserClickEvent",value:function(e){D("addUserClickEvent",e);var t=this.state.newUser;e.preventDefault(),this.addUser(t)}},{key:"addUser",value:function(e){}},{key:"deleteUser",value:function(e){D("deleteUser",e);var t=this.props.user,n=this.state.users.slice().filter(function(t){return t.email!==e});x.database().ref("users/".concat(t.uid)).set({users:n}),0===n.length&&this.setState({users:[]})}},{key:"render",value:function(){var e=this,t=this.state,n=t.users,a=t.newUser,r=t.feedback,s=n.map(function(t){return i.a.createElement(k,{key:t.uid,deleteMe:e.deleteUser,el:t})});return i.a.createElement(E,null,i.a.createElement(I,null,i.a.createElement("h1",null,"Se \xf8nskeliste til")),i.a.createElement("div",{className:"wishlist-selection__added-users-container"},s),i.a.createElement("form",{onSubmit:this.addUserClickEvent},i.a.createElement("p",null,"Legg til (legg inn epost)"),i.a.createElement("input",{value:a,onChange:this.updateUserState}),i.a.createElement("input",{className:"button button--padded",type:"submit",value:"OK"})),i.a.createElement("p",null,r))}}]),t}(i.a.Component),C=(U=function(e){var t=e.loaded,n=e.loading,a=e.load;return t||n||a(),!t},Object(y.a)(U,Object(y.b)(_)))(N),L=Object(l.b)(function(e){var t=e.user,n=e.friends;return{user:t,friends:n.friends,loaded:n.loaded,loading:n.loading}},function(e){return{load:function(){return e({type:"LOAD_FRIENDS"})}}})(C),R=n(53),T=n.n(R),F=n(58);n(89);function A(e){var t=e.name,n=e.type,a=e.onClick,r=Object(F.a)(e,["name","type","onClick"]);return i.a.createElement("button",Object.assign({type:n,className:"icon",onClick:a},r),i.a.createElement("svg",{className:"icon__icon"},i.a.createElement("use",{xlinkHref:"/svg/sprite.svg#icon-".concat(t)})))}n(91);var H=x.storage().ref(),M=n(23)("OtherWish"),P=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(m.a)(t).call(this,e))).state={image:""},e.wishInfo.image&&H.child(e.wishInfo.image).getDownloadURL().then(function(e){M("url: ",e),n.setState({image:e})}),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.wishInfo,n=e.canDelete,a=e.deleteSuggestion,r=e.onClick,s=this.state.image,c=t.image?i.a.createElement("img",{className:"other-wish__image",alt:"Awesome",src:s}):"",u=t.checked?i.a.createElement("del",null,t.name):t.name,o=i.a.createElement(T.a,{className:"other-wish__linkify"},u),l=t.checked?i.a.createElement("div",{className:"smallspace"},"Tatt"):"",d=n?i.a.createElement("button",{type:"button",className:"button other-wish__button_delete-suggestion",onClick:a},"Slett"):"";return i.a.createElement("div",{className:"flex-column border"},i.a.createElement("div",{className:"flex-row other-wish__upper-half"},i.a.createElement("div",{className:"flex-column smallspace other-wish__wish-text"},o,c),i.a.createElement("div",{className:"other-wish__buy-or-sell-wrapper"},i.a.createElement(A,{type:"button",name:(t.checked,"shopping-cart"),onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return r(t.id)})}),d)),i.a.createElement("div",{className:"flex-column"},l))}}]),t}(i.a.Component),B=n(20),z=function(e,t){return{type:"STORE_WISHES_TO_FIREBASE",uid:e,wishes:t}},V=function(e){return Object(B.a)({type:"SET_USER_WISHES"},e)};function G(){var e=Object(v.a)(["\n  display: flex;\n  justify-content: flex-end;\n"]);return G=function(){return e},e}var K=g.a.div(G()),X=n(23)("OthersWishList"),J=function(e){function t(e){var n;return Object(d.a)(this,t),n=Object(f.a)(this,Object(m.a)(t).call(this,e)),X("constructor"),n.state={hideSelected:!0,userState:"",feedback:""},n.check=n.check.bind(Object(p.a)(Object(p.a)(n))),n.toggleShowSelected=n.toggleShowSelected.bind(Object(p.a)(Object(p.a)(n))),n.shouldDisplayWish=n.shouldDisplayWish.bind(Object(p.a)(Object(p.a)(n))),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){X("componentDidMount");var e=this.props,t=e.match.params.name,n=e.setWishes;this.firebaseRef=x.database().ref("wishes/".concat(t,"/wishes")),this.firebaseRef.on("value",function(e){n(t,e&&e.val())})}},{key:"componentWillUnmount",value:function(){this.firebaseRef&&this.firebaseRef.off()}},{key:"check",value:function(e){X("check",e);var t=this.props,n=t.user,a=t.match.params.name,i=this.props,r=i.wishes,s=i.storeWishes,c=r.map(function(t){return e===t.id?(console.log(t),{name:t.name,checked:!t.checked,id:t.id,checkedby:n.email,checkedTime:new Date,image:t.image||""}):t});console.log(c),s(a,c),this.setState({feedback:"Du kj\xf8pte eller solgte noe!"})}},{key:"toggleShowSelected",value:function(e){X("toggleShowSelected",e);var t=this.state.hideSelected;e.preventDefault(),this.setState({hideSelected:!t})}},{key:"shouldDisplayWish",value:function(e){var t=this.state.hideSelected;return X("Wish to be filtered: ",e),!e.checked||!t}},{key:"render",value:function(){var e=this,t=this.state,n=t.hideSelected,a=t.userState,r=t.feedback,s=this.props.wishes.filter(this.shouldDisplayWish).map(function(t){return i.a.createElement(P,{deleteSuggestion:function(){return null},canDelete:!1,key:t.id,onClick:e.check,wishInfo:t})});return i.a.createElement(E,null,i.a.createElement("div",{className:"flex-row space-between"},i.a.createElement("h1",{className:"shrink overflow-hidden"},"\xd8nskelisten til ",a)),i.a.createElement(K,null,i.a.createElement(A,{type:"button",name:n?"eye":"eye-off",onClick:this.toggleShowSelected})),i.a.createElement("p",null,r),s)}}]),t}(i.a.Component),Q=Object(l.b)(function(e,t){var n=e.wish,a=e.user,i=t.match.params.name;return{wishes:n[i]||[],name:i,user:a}},function(e){return{setWishes:function(t,n){e(V({uid:t,wishes:n}))},storeWishes:function(t,n){e(z(t,n))}}})(J),q=n(56),Y=n(106),Z=function(e){return{type:"USER_LOADED",user:e}};function $(){var e=Object(v.a)(["\n\n"]);return $=function(){return e},e}function ee(){var e=Object(v.a)(["\n\n"]);return ee=function(){return e},e}function te(){var e=Object(v.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return te=function(){return e},e}var ne=g.a.div(te()),ae=g.a.div(ee()),ie=g.a.div($());var re=Object(l.b)(function(e){return{user:e.user}},function(e){return{logout:function(){e({type:"LOG_OUT"})}}})(function(e){var t=e.user,n=e.logout,r=Object(a.useState)(""),s=Object(q.a)(r,2),c=s[0],u=s[1];return t&&!t.uid?i.a.createElement(Y.a,{to:"/"}):i.a.createElement(E,null,i.a.createElement("h1",null,"Hvilken \xf8nskeliste vil du se?"),i.a.createElement(ne,null,i.a.createElement(ae,null,i.a.createElement(O.a,{className:"smallspace button button--padded",to:"/"},"Din"),i.a.createElement(O.a,{className:"smallspace button button--padded",to:"/others"},"Andres")),i.a.createElement(ie,null,i.a.createElement("p",null,"Innlogget som ",t?t.email:"Ukjent"),i.a.createElement("button",{type:"button",className:"select-user__logout button-navigation button--square",onClick:function(){return function(e,t){x.auth().signOut().then(function(){e("Du er n\xe5 logget ut"),t()},function(t){console.log(t),e("Noe gikk galt under utlogging.")})}(u,n)}},"Logg ut"),c)))}),se=new x.auth.FacebookAuthProvider;function ce(){return(ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var ue=i.a.createElement("path",{id:"Blue_1_",fill:"#3C5A99",d:"M248.082,262.307c7.854,0,14.223-6.369,14.223-14.225V18.812 c0-7.857-6.368-14.224-14.223-14.224H18.812c-7.857,0-14.224,6.367-14.224,14.224v229.27c0,7.855,6.366,14.225,14.224,14.225 H248.082z"}),oe=i.a.createElement("path",{id:"f",fill:"#FFFFFF",d:"M182.409,262.307v-99.803h33.499l5.016-38.895h-38.515V98.777c0-11.261,3.127-18.935,19.275-18.935 l20.596-0.009V45.045c-3.562-0.474-15.788-1.533-30.012-1.533c-29.695,0-50.025,18.126-50.025,51.413v28.684h-33.585v38.895h33.585 v99.803H182.409z"}),le=(n.p,n(54)),de=n.n(le);function he(){var e=Object(v.a)(["\n  display: flex;\n  margin: 1rem;\n"]);return he=function(){return e},e}function fe(){var e=Object(v.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n"]);return fe=function(){return e},e}var me=x.storage().ref(),be=n(23)("Wish");n(94);var pe=g.a.div(fe()),ve=g.a.div(he()),ge=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(m.a)(t).call(this,e))).state={edit:!1,text:e.wish.name,confirm:!1,image:""},n.click=n.click.bind(Object(p.a)(Object(p.a)(n))),n.focusLost=n.focusLost.bind(Object(p.a)(Object(p.a)(n))),n.updateText=n.updateText.bind(Object(p.a)(Object(p.a)(n))),n.deleteItem=n.deleteItem.bind(Object(p.a)(Object(p.a)(n))),n.cancel=n.cancel.bind(Object(p.a)(Object(p.a)(n))),n.deleteConfirmed=n.deleteConfirmed.bind(Object(p.a)(Object(p.a)(n))),n.onDrop=n.onDrop.bind(Object(p.a)(Object(p.a)(n))),be("props: ",e),e.wish.image&&me.child(e.wish.image).getDownloadURL().then(function(e){be("url: ",e),n.setState({image:e})}),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({text:e.wish.name,confirm:e.wish.confirm})}},{key:"componentDidUpdate",value:function(){this.input&&this.input.focus()}},{key:"onDrop",value:function(e,t){var n=this;be("Looks like I dropped something",e,t);var a=this.props,i=a.wish,r=a.addImage,s="".concat(i.id,".").concat(e[0].name.split(".")[1]);me.child(s).put(e[0]).on("state_changed",function(){},function(){be("Error. Wups.")},function(){be("Success!"),me.child(s).getDownloadURL().then(function(e){be("url: ",e),n.setState({image:e})}),r(i,s)})}},{key:"updateText",value:function(e){this.setState({text:e.target.value})}},{key:"deleteItem",value:function(){this.setState({confirm:!0})}},{key:"cancel",value:function(){this.setState({confirm:!1})}},{key:"deleteConfirmed",value:function(){var e=this.props;(0,e.delete)(e.wish.id)}},{key:"focusLost",value:function(){var e=this.props,t=e.update,n=e.wish,a=this.state.text;this.setState({edit:!1}),t({name:a,id:n.id,checkedby:n.checkedby,checked:n.checked,image:n.image})}},{key:"click",value:function(){this.setState({edit:!0})}},{key:"render",value:function(){var e=this,t=this.props.wish,n=this.state,a=n.confirm,r=n.image,s=n.edit,c=n.text,u=t.image?i.a.createElement("img",{className:"wish__image",alt:"Awesome",src:r}):"",o=a?i.a.createElement(pe,null,i.a.createElement(A,{type:"button",name:"x",onClick:this.cancel}),i.a.createElement(A,{type:"button",name:"check",onClick:this.deleteConfirmed})):i.a.createElement(pe,null,i.a.createElement(A,{type:"button",name:"trash-2",onClick:this.deleteItem}),i.a.createElement(de.a,{className:"wish__wish-dropzone",onDrop:this.onDrop},i.a.createElement(A,{type:"button",name:"upload",onClick:function(){return null}}))),l=s?i.a.createElement("textarea",{className:"wish__wish-text wish__wish-text--active",ref:function(t){e.input=t},onBlur:this.focusLost,onChange:this.updateText,value:c}):i.a.createElement("textarea",{onClick:this.click,className:"wish__wish-text",defaultValue:c});return i.a.createElement("div",{className:"wish__one-wish"},i.a.createElement(ve,null,l,o),u)}}]),t}(i.a.Component),Oe=n(23)("YourWishList");n(96);var ke=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(m.a)(t).call(this,e))).state={newWish:"",feedback:""},n.addWish=n.addWish.bind(Object(p.a)(Object(p.a)(n))),n.updateWishState=n.updateWishState.bind(Object(p.a)(Object(p.a)(n))),n.update=n.update.bind(Object(p.a)(Object(p.a)(n))),n.deleteThis=n.deleteThis.bind(Object(p.a)(Object(p.a)(n))),n.addImage=n.addImage.bind(Object(p.a)(Object(p.a)(n))),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){Oe("componentDidMount");var e=this.props,t=e.user,n=e.updateWishStore;this.firebaseRef=x.database().ref("wishes/".concat(t.uid,"/wishes")),this.firebaseRef.on("value",function(e){n(e.val())})}},{key:"componentWillUnmount",value:function(){this.firebaseRef.off()}},{key:"createGuid",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}},{key:"updateWishState",value:function(e){this.setState({newWish:e.target.value})}},{key:"addWish",value:function(e){var t=this.props,n=(t.user,t.wishes),a=t.storeWishesToFirebase,i=this.state.newWish;if(e.preventDefault(),""!==i){Oe("Adding wish");var r=Object.assign([],n);r.unshift({name:i,checked:!1,checkedby:"",id:this.createGuid(),image:""}),a(r),this.setState({newWish:"",feedback:""})}else this.setState({feedback:"\xd8nsket kan ikke v\xe6re tomt"})}},{key:"update",value:function(e){Oe("Saving wishlist: ",e);var t=this.props,n=(t.user,t.wishes);(0,t.storeWishesToFirebase)(n.map(function(t){return t.id===e.id?{name:e.name,checked:e.checked,checkedby:e.checkedby?e.checkedby:"",id:e.id,image:e.image?e.image:""}:t}))}},{key:"addImage",value:function(e,t){Oe("Adding image to wish: ",e,t);var n=this.props,a=(n.user,n.wishes);(0,n.storeWishesToFirebase)(a.map(function(n){return n.id===e.id?{name:e.name,checked:e.checked,checkedby:e.checkedby?e.checkedby:"",id:e.id,image:t}:n}))}},{key:"deleteThis",value:function(e){Oe("Delete id: ",e);var t=this.props,n=(t.user,t.wishes),a=t.storeWishesToFirebase,i=Object.assign([],n),r=i.filter(function(t){return Oe(t.id),t.id!==e});Oe("Wish list after deletion: ",i),a(r)}},{key:"render",value:function(){var e=this;Oe("This.props. ",this.props);var t=this.props.wishes,n=this.state,a=n.newWish,r=n.feedback,s=t.map(function(t){return Oe("Creating wish based on this el: ",t),i.a.createElement(ge,{key:t.id,update:e.update,delete:e.deleteThis,addImage:e.addImage,wish:t})});return Oe("Wishes: ",s),i.a.createElement(E,null,i.a.createElement("div",{className:"flex-row space-between"},i.a.createElement("h1",null,"Din \xf8nskeliste")),i.a.createElement("form",{onSubmit:this.addWish},i.a.createElement("div",{className:"your-wishlist_add-wish-wrapper"},i.a.createElement("textarea",{placeholder:"Legg inn nye \xf8nsker her",className:"your-wishlist_add-wish-textarea",value:a,onChange:this.updateWishState}),i.a.createElement(A,{type:"submit",name:"check",onClick:function(){return null}}),i.a.createElement("div",null,r))),i.a.createElement("div",{className:"your-wishlist__wishlist"},s))}}]),t}(i.a.Component),we=Object(l.b)(function(e){var t=e.wish,n=e.user;return Oe("User wishes",t[n.uid]),{wishes:t[n.uid]?t[n.uid]:[],user:n}},function(e){return{updateWishStore:function(t){e({type:"SET_OWN_WISHES",wishes:t})},storeWishesToFirebase:function(t){e({type:"STORE_OWN_WISHES_TO_FIREBASE",wishes:t})}}})(ke);function Ee(){var e=Object(v.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Ee=function(){return e},e}function je(){var e=Object(v.a)(["\n  font-size: 1em;\n  height: ",";\n  width: ",";\n  margin-right: 6px;\n"]);return je=function(){return e},e}function Se(){var e=Object(v.a)(["\n  border: 2px solid ",';\n  padding: 7px 14px;\n  background: transparent;\n  border-radius: 8px;\n  outline: none;\n  font-family: "Open Sans", "Helvetica Neue", Arial, Helvetica, Verdana, sans-serif;\n  font-size: 16px;\n  color: white;\n  display: flex;\n  align-items: center;\n  max-width: 300px;\n']);return Se=function(){return e},e}function xe(){var e=Object(v.a)(["\n  margin: 2rem;\n  height: 4rem;\n"]);return xe=function(){return e},e}function ye(){var e=Object(v.a)(["\n  font-size: 3rem;\n  margin: 2rem;\n"]);return ye=function(){return e},e}var _e=n(23)("SelectUser");n(98);var We=g.a.p(ye()),De=(g.a.input(xe()),g.a.button(Se(),"#b49b57")),Ue=Object(g.a)(function(e){return i.a.createElement("svg",ce({version:1.1,id:"Layer_1",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"266.893px",height:"266.895px",viewBox:"0 0 266.893 266.895",enableBackground:"new 0 0 266.893 266.895",xmlSpace:"preserve"},e),ue,oe)})(je(),"30px","30px"),Ie=g.a.div(Ee()),Ne=function(e){function t(e){var n;return Object(d.a)(this,t),n=Object(f.a)(this,Object(m.a)(t).call(this,e)),_e("constructor"),n.state={user:"",password:"",feedback:""},n.updateUserState=n.updateUserState.bind(Object(p.a)(Object(p.a)(n))),n.updatePasswordState=n.updatePasswordState.bind(Object(p.a)(Object(p.a)(n))),n.logIn=n.logIn.bind(Object(p.a)(Object(p.a)(n))),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;_e("componentDidMount"),x.auth().getRedirectResult().then(function(){_e("Login was apparently successful")}).catch(function(t){_e("Facebook login failed: ",t),t&&e.setState({feedback:"Klarte ikke \xe5 logge deg inn med facebook, beklager det."})})}},{key:"loginFacebook",value:function(e){_e("loginFacebook",e),e.preventDefault(),e.stopPropagation(),x.auth().signInWithRedirect(se)}},{key:"updateUserState",value:function(e){_e("updateUserState",e),this.setState({user:e.target.value})}},{key:"updatePasswordState",value:function(e){_e("updatePasswordState",e),this.setState({password:e.target.value})}},{key:"logIn",value:function(e){var t=this;_e("logIn",e);var n=this.state,a=n.user,i=n.password;_e("Logging user in with the following credentials: ",a,i),e.preventDefault(),this.setState({feedback:""}),x.auth().signInWithEmailAndPassword(a,i).catch(function(e){var n=e.code,a=e.message;_e("Errorcode: ",n,"errorMessage",a),n&&t.setState({feedback:"Klarte ikke \xe5 logge deg inn, beklager det."})})}},{key:"render",value:function(){if(this.props.user.uid)return i.a.createElement(we,null);var e=this.state,t=(e.user,e.password,e.feedback),n=i.a.createElement(Ie,null,i.a.createElement(De,{onClick:this.loginFacebook},i.a.createElement(Ue,null),"Logg p\xe5 med facebook"));return i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",null,"\xd8NSK DEG NOE"),n,i.a.createElement(We,null,t))}}]),t}(i.a.Component),Ce=Object(l.b)(function(e){return{user:e.user}},null)(Ne),Le=n(26),Re=n(55),Te={loaded:!1,uid:void 0,email:void 0},Fe=n(23)("userReducer"),Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(Fe("Input: state: ",e,". Action: ",t),t.type){case"USER_LOADED":if(t.user){var n=t.user,a=n.uid,i=n.email;return Object(B.a)({},e,{uid:a,email:i,loaded:!0})}return Object(B.a)({},e,{loaded:!0});case"LOG_OUT":return Te;default:return Object(B.a)({},e)}},He=n(35),Me={},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ALL_WISHES":return Object.assign({},t.wishes);case"SET_USER_WISHES":var n=t.uid;return Object(B.a)({},e,Object(He.a)({},n,t.wishes));default:return e}},Be={loaded:!1,loading:!1,friends:[]},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_FRIENDS":return Object(B.a)({},e,{loading:!0});case"FRIENDS_LOADED":return Object(B.a)({},e,{friends:t&&t.data&&t.data.filter(function(e){return e}),loading:!1,loaded:!0});default:return Object(B.a)({},e)}},Ve=Object(Le.c)({user:Ae,wish:Pe,friends:ze}),Ge=n(22),Ke=n.n(Ge),Xe=n(13),Je=function(e){return e.user},Qe=Ke.a.mark(et),qe=Ke.a.mark(tt),Ye=Ke.a.mark(at),Ze=Ke.a.mark(it);function $e(e){return new Promise(function(t){x.database().ref("users/".concat(e.uid,"/users")).on("value",function(e){if(null!=e){var n=e.val();t(n)}})})}function et(){var e,t;return Ke.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Xe.c)(Je);case 2:return e=n.sent,n.next=5,Object(Xe.a)($e,e);case 5:return t=n.sent,n.next=8,Object(Xe.b)({type:"FRIENDS_LOADED",data:t});case 8:case"end":return n.stop()}},Qe,this)}function tt(e){var t,n,a;return Ke.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.wishes,i.next=3,Object(Xe.c)(Je);case 3:return n=i.sent,a=n.uid,i.next=7,Object(Xe.b)(V({uid:a,wishes:t}));case 7:case"end":return i.stop()}},qe,this)}function nt(e){var t=e.uid,n=e.wishes;x.database().ref("wishes/".concat(t,"/wishes")).set(n)}function at(e){var t,n,a;return Ke.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(Xe.c)(Je);case 2:return t=i.sent,n=t.uid,a=e.wishes,i.next=7,Object(Xe.b)(z(n,a));case 7:case"end":return i.stop()}},Ye,this)}function it(){return Ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Xe.d)("LOAD_FRIENDS",et);case 2:return e.next=4,Object(Xe.d)("SET_OWN_WISHES",tt);case 4:return e.next=6,Object(Xe.d)("STORE_WISHES_TO_FIREBASE",nt);case 6:return e.next=8,Object(Xe.d)("STORE_OWN_WISHES_TO_FIREBASE",at);case 8:case"end":return e.stop()}},Ze,this)}var rt=it,st=Object(Re.a)(),ct=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Le.d,ut=Object(Le.e)(Ve,ct(Object(Le.a)(st)));st.run(rt);var ot=ut,lt=n(23)("authFirebase"),dt={authChangeListener:function(){x.auth().onAuthStateChanged(function(e){lt("onAuthStateChanged. User logged in: ",e),e?(ot.dispatch(Z(e)),x.database().ref("/userlist").once("value").then(function(t){var n=t.val(),a=0===n.filter(function(t){return t.email===e.email}).length;void 0===n?((n=[]).push({email:e.email,uid:e.uid}),lt("Users to be stored after new user added",n),x.database().ref("/userlist").set(n)):a&&(n.push({email:e.email,uid:e.uid}),lt("Adding user ",e,"Users: ",n),x.database().ref("/userlist").set(n))})):ot.dispatch(Z(null))})}};n(102);var ht=Object(l.b)(function(e){return{loaded:e.user.loaded}})(function(e){return e.loaded?i.a.createElement(c.a,null,i.a.createElement(i.a.Fragment,null,i.a.createElement(re,null),i.a.createElement(u.a,null,i.a.createElement(o.a,{path:"/",exact:!0,component:Ce}),i.a.createElement(o.a,{path:"/others",component:L}),i.a.createElement(o.a,{path:"/other/:name",component:Q})))):i.a.createElement("div",null,"Laster")});dt.authChangeListener();var ft=function(){return i.a.createElement(l.a,{store:ot},i.a.createElement(ht,null))};s.a.render(i.a.createElement(ft,null),document.getElementById("root"))},59:function(e,t,n){e.exports=n(104)},64:function(e,t,n){},66:function(e,t,n){},71:function(e,t,n){},80:function(e,t,n){},89:function(e,t,n){},91:function(e,t,n){},94:function(e,t,n){},96:function(e,t,n){},98:function(e,t,n){}},[[59,2,1]]]);
//# sourceMappingURL=main.9c834b73.chunk.js.map